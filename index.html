<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <meta name="description" content="Ø¢Ø±Ø§Ø¯ Ú©ÙˆØ¦ÛŒØ² â€“ Ù†Ø³Ø®Ù‡ Ø§Ø¨Ø±ØºÙˆÙ„: Ø¨Ø§Ø²ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ… Ø¨Ø§ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ØŒ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ØŒ Ø¢Ù…ÙˆØ²Ø´ØŒ Ù…ÛŒÙ†ÛŒâ€ŒÚ¯ÛŒÙ…ØŒ Ø³ÛŒØ³ØªÙ… Ø³Ú©Ù‡ Ùˆ Ø¬Ø²ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù…Ù„!">
  <meta name="keywords" content="Ø¨Ø§Ø²ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ, Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ…, Ø¢Ø±Ø§Ø¯ Ù…Ù‚Ø¯Ù…, Ø±ÛŒØ§Ø¶ÛŒ Ù‡ÙØªÙ…, Ø¹Ù„ÙˆÙ… Ù‡ÙØªÙ…, ÙØ§Ø±Ø³ÛŒ Ù‡ÙØªÙ…, Ù…Ø·Ø§Ù„Ø¹Ø§Øª Ù‡ÙØªÙ…, Ø¢Ù…ÙˆØ²Ø´ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ, Ø¨Ø§Ø²ÛŒ Ø±Ù‚Ø§Ø¨ØªÛŒ, Ø¬Ø²ÙˆÙ‡ Ø¯Ø±Ø³ÛŒ">
  <meta name="author" content="Ø¢Ø±Ø§Ø¯ Ù…Ù‚Ø¯Ù…">
  <title>Ø¢Ø±Ø§Ø¯ Ú©ÙˆØ¦ÛŒØ² â€“ Ù†Ø³Ø®Ù‡Ù” Ø§Ø¨Ø±ØºÙˆÙ„</title>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&family=Shabnam:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #4A00E0;
      --secondary: #8E2DE2;
      --success: #00C853;
      --danger: #FF5252;
      --warning: #FFD700;
      --info: #2196F3;
      --light: #f8f9fa;
      --dark: #212529;
      --glass: rgba(255, 255, 255, 0.1);
      --glass-border: rgba(255, 255, 255, 0.2);
    }
    * {
      margin: 0; padding: 0; box-sizing: border-box;
      font-family: 'Vazirmatn', system-ui, sans-serif;
    }
    body {
      background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
      color: white; min-height: 100vh; padding: 0;
      text-align: center; overflow-x: hidden;
    }
    .header {
      background: rgba(0, 0, 0, 0.3);
      padding: 10px; display: flex; justify-content: space-between;
      align-items: center; box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }
    .profile-summary {
      display: flex; align-items: center; gap: 10px;
      cursor: pointer;
    }
    .avatar {
      width: 40px; height: 40px; border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      display: flex; align-items: center; justify-content: center;
      font-size: 1.2rem; color: white; font-weight: bold;
    }
    .profile-info {
      text-align: right;
    }
    .profile-name {
      font-size: 1.1rem; font-weight: bold;
    }
    .profile-coins {
      font-size: 0.9rem; color: var(--warning);
    }
    .container {
      max-width: 600px; margin: 0 auto; padding: 15px;
    }
    h1 {
      font-size: 2.2rem; margin: 15px 0;
      background: linear-gradient(to right, #ff9a9e, #fad0c4, #fbc2eb, #a6c1ee);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    .btn {
      display: block; width: 90%; padding: 14px; margin: 12px auto;
      border: none; border-radius: 20px; font-size: 1.3rem; font-weight: bold;
      color: white; cursor: pointer; transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      background: linear-gradient(to right, var(--primary), var(--secondary));
    }
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
    }
    .btn-shop { background: linear-gradient(to right, #FF8C00, #FF4500); }
    .btn-learn { background: linear-gradient(to right, #00C9FF, #92FE9D); }
    .btn-game { background: linear-gradient(to right, #834d9b, #d04ed6); }
    .btn-note { background: linear-gradient(to right, #FFD700, #FFA500); color: #333; }
    .screen { display: none; }
    .active { display: block; }
    
    /* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ú¯Ø²ÛŒÙ†Ù‡ */
    .option-card {
      background: var(--glass);
      backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
      margin: 10px auto; padding: 16px;
      border-radius: 18px; width: 92%; font-size: 1.25rem;
      cursor: pointer; transition: all 0.25s;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    .option-card:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: scale(1.02);
    }
    .option-card.correct {
      background: rgba(0, 200, 83, 0.3) !important;
      border-color: #00c853;
      transform: scale(1.03);
    }
    .option-card.wrong {
      background: rgba(255, 82, 82, 0.3) !important;
      border-color: #ff5252;
      transform: scale(1.03);
    }
    
    /* Ù¾Ù†Ø¬Ø±Ù‡ ØªÙˆØ¶ÛŒØ­Ø§Øª */
    .modal {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.8); display: flex; align-items: center;
      justify-content: center; z-index: 1000;
    }
    .modal-content {
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      padding: 25px; border-radius: 25px; width: 90%; max-width: 500px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      border: 2px solid var(--warning);
    }
    .modal h2 {
      color: var(--warning); margin-bottom: 15px;
      font-size: 1.6rem;
    }
    .modal p {
      font-size: 1.2rem; line-height: 1.6;
      margin-bottom: 20px;
    }
    .close-btn {
      background: var(--danger); padding: 10px 20px;
      border-radius: 15px; color: white; font-weight: bold;
      cursor: pointer;
    }
    
    /* Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ù…Ù„ */
    .profile-full {
      background: var(--glass);
      backdrop-filter: blur(10px);
      border-radius: 25px; padding: 25px; margin: 20px 0;
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    }
    .profile-full h2 {
      margin-bottom: 20px; color: var(--warning);
    }
    .profile-stats {
      display: grid; grid-template-columns: repeat(2, 1fr);
      gap: 15px; margin: 20px 0;
    }
    .stat-card {
      background: rgba(0,0,0,0.2); padding: 15px;
      border-radius: 15px; text-align: center;
    }
    .stat-value {
      font-size: 1.4rem; font-weight: bold;
      color: var(--info);
    }
    .stat-label {
      font-size: 0.9rem; opacity: 0.8;
    }
    
    /* Ø¬Ø²ÙˆÙ‡â€ŒÙ‡Ø§ */
    .notebook {
      background: var(--glass);
      backdrop-filter: blur(10px);
      border-radius: 20px; padding: 20px; margin: 15px 0;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    }
    .notebook h3 {
      color: var(--warning); margin-bottom: 10px;
    }
    .notebook p {
      font-size: 1.1rem; line-height: 1.7;
      margin-bottom: 10px;
    }
    
    /* ÙØ±ÙˆØ´Ú¯Ø§Ù‡ */
    .shop-item {
      background: var(--glass);
      backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
      border-radius: 20px; padding: 20px; margin: 15px;
      cursor: pointer; transition: all 0.3s;
    }
    .shop-item:hover {
      background: rgba(255,255,255,0.15);
      transform: translateY(-5px);
    }
    .shop-item h3 {
      color: var(--warning); margin-bottom: 10px;
    }
    .shop-item .price {
      color: var(--success); font-weight: bold;
      font-size: 1.2rem;
    }
    
    /* ÛŒØ§Ø¯Ø¯Ø§Ø´Øª */
    .note-input {
      width: 90%; padding: 15px; margin: 15px auto;
      border-radius: 15px; border: none; font-size: 1.1rem;
      background: var(--glass); color: white;
    }
    .notes-list {
      text-align: left;
      margin: 20px 0;
    }
    .note-item {
      background: var(--glass);
      padding: 15px; margin: 10px 0;
      border-radius: 15px;
    }
    
    /* Ù…ÛŒÙ†ÛŒâ€ŒÚ¯ÛŒÙ…â€ŒÙ‡Ø§ */
    .game-board {
      display: grid; grid-template-columns: repeat(3, 1fr);
      gap: 10px; margin: 20px auto;
      max-width: 300px;
    }
    .game-cell {
      aspect-ratio: 1/1; background: var(--glass);
      border-radius: 10px; display: flex; align-items: center;
      justify-content: center; font-size: 1.5rem;
      cursor: pointer;
    }
    
    @media (max-width: 480px) {
      h1 { font-size: 1.8rem; }
      .btn { font-size: 1.2rem; padding: 12px; }
      .header { padding: 8px; }
      .avatar { width: 35px; height: 35px; font-size: 1rem; }
    }
  </style>
</head>
<body>
  <!-- Ù‡Ø¯Ø± Ø¨Ø§ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø¯Ø§Ø¦Ù…ÛŒ -->
  <div class="header">
    <div class="profile-summary" onclick="showScreen('fullProfile')">
      <div class="avatar" id="headerAvatar">A</div>
      <div class="profile-info">
        <div class="profile-name" id="headerName">Ú©Ø§Ø±Ø¨Ø±</div>
        <div class="profile-coins">Ø³Ú©Ù‡: <span id="headerCoins">0</span></div>
      </div>
    </div>
    <div style="font-size:0.9rem;opacity:0.7;">Ø¢Ø±Ø§Ø¯ Ù…Ù‚Ø¯Ù…</div>
  </div>

  <div class="container">
    <!-- ØµÙØ­Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… -->
    <div id="register" class="screen active">
      <h1>ğŸ® Ø¢Ø±Ø§Ø¯ Ú©ÙˆØ¦ÛŒØ² ğŸ®</h1>
      <p style="font-size:1.2rem;margin:15px 0;">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø¯Ù†ÛŒØ§ÛŒ Ø¢Ù…ÙˆØ²Ø´ Ùˆ Ø®Ù„Ø§Ù‚ÛŒØª!</p>
      <input type="text" id="firstName" placeholder="Ù†Ø§Ù…" style="width:90%;padding:12px;margin:10px;border-radius:15px;border:none;font-size:1.2rem;text-align:center;background:rgba(255,255,255,0.1);color:white;">
      <input type="text" id="lastName" placeholder="Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ" style="width:90%;padding:12px;margin:10px;border-radius:15px;border:none;font-size:1.2rem;text-align:center;background:rgba(255,255,255,0.1);color:white;">
      <button class="btn" onclick="registerUser()">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø¯Ù†ÛŒØ§ÛŒ Ø¢Ø±Ø§Ø¯</button>
      <p style="font-size:1.1rem;margin-top:25px;color:#ffcc00;opacity:0.9;">
        Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ ØªÙˆØ³Ø·: Ø¢Ø±Ø§Ø¯ Ù…Ù‚Ø¯Ù…<br>
        <span style="font-size:0.9rem;">Ù†Ø³Ø®Ù‡Ù” Ø§Ø¨Ø±ØºÙˆÙ„ - ØªÙ…Ø§Ù… Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª</span>
      </p>
    </div>

    <!-- Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§ØµÙ„ÛŒ -->
    <div id="dashboard" class="screen">
      <h1>ğŸŒŒ Ø¯Ù†ÛŒØ§ÛŒ Ø¢Ø±Ø§Ø¯</h1>
      <button class="btn btn-game" onclick="showScreen('battleSelect')">âš”ï¸ Ø±Ù‚Ø§Ø¨Øª Ø¨Ø§ Ø±Ø¨Ø§Øª</button>
      <button class="btn btn-learn" onclick="showScreen('learning')">ğŸ“š Ø¬Ø²ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³ÛŒ</button>
      <button class="btn btn-shop" onclick="showScreen('shop')">ğŸ›’ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</button>
      <button class="btn btn-note" onclick="showScreen('notes')">ğŸ“ Ø¯ÙØªØ±Ú†Ù‡ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª</button>
      <button class="btn" style="background:linear-gradient(to right, #FF416C, #FF4B2B);" onclick="showScreen('creativity')">ğŸ’¡ Ø§ÛŒØ¯Ù‡â€ŒÙ¾Ø±Ø¯Ø§Ø²ÛŒ</button>
      <button class="btn" style="background:linear-gradient(to right, #00C9FF, #92FE9D);" onclick="showScreen('miniGames')">ğŸ® Ù…ÛŒÙ†ÛŒâ€ŒÚ¯ÛŒÙ…â€ŒÙ‡Ø§</button>
    </div>

    <!-- Ø§Ù†ØªØ®Ø§Ø¨ Ø­Ø§Ù„Øª Ø±Ù‚Ø§Ø¨Øª -->
    <div id="battleSelect" class="screen">
      <h1>Ø­Ø§Ù„Øª Ø±Ù‚Ø§Ø¨Øª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†</h1>
      <button class="btn" style="background:linear-gradient(to right, #FF9A00, #FF4500);" onclick="startBattle('Ø±ÛŒØ§Ø¶ÛŒ')">Ø±ÛŒØ§Ø¶ÛŒ</button>
      <button class="btn" style="background:linear-gradient(to right, #00C853, #00E676);" onclick="startBattle('Ø¹Ù„ÙˆÙ…')">Ø¹Ù„ÙˆÙ…</button>
      <button class="btn" style="background:linear-gradient(to right, #2196F3, #21CBF3);" onclick="startBattle('ÙØ§Ø±Ø³ÛŒ')">ÙØ§Ø±Ø³ÛŒ</button>
      <button class="btn" style="background:linear-gradient(to right, #9C27B0, #E040FB);" onclick="startBattle('Ù…Ø·Ø§Ù„Ø¹Ø§Øª')">Ù…Ø·Ø§Ù„Ø¹Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ</button>
      <button class="btn" style="background:linear-gradient(to right, #FF5252, #FF7B7B);" onclick="startBattle('Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ')">Ø²Ø¨Ø§Ù† Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ</button>
      <button class="btn" style="background:#555;" onclick="showScreen('dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- ØµÙØ­Ù‡ Ø¢Ø²Ù…ÙˆÙ† -->
    <div id="quiz" class="screen">
      <div class="profile-summary" style="justify-content:center;margin-bottom:20px;">
        <div class="avatar" id="quizAvatar">A</div>
        <div class="profile-info" style="text-align:left;margin-left:10px;">
          <div class="profile-name" id="quizName">Ú©Ø§Ø±Ø¨Ø±</div>
          <div class="profile-coins">Ø³Ú©Ù‡: <span id="quizCoins">0</span></div>
        </div>
      </div>
      <div class="question-box" id="question" style="background:rgba(0,0,0,0.3);padding:20px;border-radius:20px;margin:20px 0;font-size:1.4rem;line-height:1.5;"></div>
      <div id="options"></div>
    </div>

    <!-- Ø¢Ù…ÙˆØ²Ø´ (Ø¬Ø²ÙˆÙ‡â€ŒÙ‡Ø§) -->
    <div id="learning" class="screen">
      <h1>ğŸ“š Ø¬Ø²ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³ÛŒ</h1>
      <div class="notebook">
        <h3>ğŸ“– Ø±ÛŒØ§Ø¶ÛŒ Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ…</h3>
        <p><strong>Ø±ÙˆØ´ Ù…Ø·Ø§Ù„Ø¹Ù‡:</strong> Ø§Ø¨ØªØ¯Ø§ ÙØ±Ù…ÙˆÙ„â€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø±Ú© Ú©Ù†ÛŒØ¯ØŒ Ø³Ù¾Ø³ ØªÙ…Ø±ÛŒÙ† Ú©Ù†ÛŒØ¯.</p>
        <p><strong>Ù†Ú©Ø§Øª Ø·Ù„Ø§ÛŒÛŒ:</strong> Ø¨Ø±Ø§ÛŒ Ù…Ø³Ø§Ø¦Ù„ Ú©Ù„Ø§Ù…ÛŒØŒ Ø§Ø¨ØªØ¯Ø§ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ú©Ù†ÛŒØ¯.</p>
        <p><strong>ØªØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ:</strong> Ú†Ø±Ø§ Ø¯Ø± Ø¶Ø±Ø¨ Ø¯Ùˆ Ø¹Ø¯Ø¯ Ù…Ù†ÙÛŒØŒ Ø­Ø§ØµÙ„ Ù…Ø«Ø¨Øª Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŸ</p>
        <button class="btn" style="background:linear-gradient(to right, #FF9A00, #FF4500);margin-top:15px;" onclick="buyNotebook('Ø±ÛŒØ§Ø¶ÛŒ')">Ø®Ø±ÛŒØ¯ (200 Ø³Ú©Ù‡)</button>
      </div>
      <div class="notebook">
        <h3>ğŸ”¬ Ø¹Ù„ÙˆÙ… Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ…</h3>
        <p><strong>Ø±ÙˆØ´ Ù…Ø·Ø§Ù„Ø¹Ù‡:</strong> Ø¢Ø²Ù…Ø§ÛŒØ´â€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø± Ø°Ù‡Ù† Ø®ÙˆØ¯ ØªØµÙˆØ± Ú©Ù†ÛŒØ¯.</p>
        <p><strong>Ù†Ú©Ø§Øª Ø·Ù„Ø§ÛŒÛŒ:</strong> ØªÙØ§ÙˆØª ØªØºÛŒÛŒØ± ÙÛŒØ²ÛŒÚ©ÛŒ Ùˆ Ø´ÛŒÙ…ÛŒØ§ÛŒÛŒ Ø±Ø§ Ø­ÙØ¸ Ù†Ú©Ù†ÛŒØ¯ØŒ Ø¯Ø±Ú© Ú©Ù†ÛŒØ¯.</p>
        <p><strong>ØªØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ:</strong> Ú†Ø±Ø§ Ø¢Ù‡Ù† Ø²Ù†Ú¯ Ù…ÛŒâ€ŒØ²Ù†Ø¯ ÙˆÙ„ÛŒ Ø·Ù„Ø§ Ù†Ù‡ØŸ</p>
        <button class="btn" style="background:linear-gradient(to right, #00C853, #00E676);margin-top:15px;" onclick="buyNotebook('Ø¹Ù„ÙˆÙ…')">Ø®Ø±ÛŒØ¯ (200 Ø³Ú©Ù‡)</button>
      </div>
      <div class="notebook">
        <h3>âœ’ï¸ ÙØ§Ø±Ø³ÛŒ Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ…</h3>
        <p><strong>Ø±ÙˆØ´ Ù…Ø·Ø§Ù„Ø¹Ù‡:</strong> Ù…ØªÙ†â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø§ ØµØ¯Ø§ÛŒ Ø¨Ù„Ù†Ø¯ Ø¨Ø®ÙˆØ§Ù†ÛŒØ¯.</p>
        <p><strong>Ù†Ú©Ø§Øª Ø·Ù„Ø§ÛŒÛŒ:</strong> Ø¨Ø±Ø§ÛŒ ØªØ´Ø®ÛŒØµ Ù†Ù‡Ø§Ø¯ Ùˆ Ú¯Ø²Ø§Ø±ØŒ Ø¬Ù…Ù„Ù‡ Ø±Ø§ Ø¨Ù‡ Ø³Ø¤Ø§Ù„ ØªØ¨Ø¯ÛŒÙ„ Ú©Ù†ÛŒØ¯.</p>
        <p><strong>ØªØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ:</strong> Ú†Ø±Ø§ Ø¯Ø± Ø¬Ù…Ù„Ù‡ Â«Ø¢Ø³Ù…Ø§Ù† Ø¢Ø¨ÛŒ Ø¨ÙˆØ¯Â»ØŒ Â«Ø¢Ø¨ÛŒÂ» Ú¯Ø²Ø§Ø± Ø§Ø³ØªØŸ</p>
        <button class="btn" style="background:linear-gradient(to right, #2196F3, #21CBF3);margin-top:15px;" onclick="buyNotebook('ÙØ§Ø±Ø³ÛŒ')">Ø®Ø±ÛŒØ¯ (200 Ø³Ú©Ù‡)</button>
      </div>
      <div class="notebook">
        <h3>ğŸ—ºï¸ Ù…Ø·Ø§Ù„Ø¹Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ…</h3>
        <p><strong>Ø±ÙˆØ´ Ù…Ø·Ø§Ù„Ø¹Ù‡:</strong> Ù†Ù‚Ø´Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø§ Ø¬Ø²ÙˆÙ‡ ØªØ±Ú©ÛŒØ¨ Ú©Ù†ÛŒØ¯.</p>
        <p><strong>Ù†Ú©Ø§Øª Ø·Ù„Ø§ÛŒÛŒ:</strong> Ø¨Ø±Ø§ÛŒ Ø­ÙØ¸ Ú©Ø±Ø¯Ù†ØŒ Ø§Ø² Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ ØªØµÙˆÛŒØ±ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.</p>
        <p><strong>ØªØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ:</strong> Ú†Ø±Ø§ Ø§Ø³ØªØ§Ù† Ú¯ÛŒÙ„Ø§Ù† Ø³Ø§Ø­Ù„ÛŒ Ø§Ø³Øª ÙˆÙ„ÛŒ Ø¢Ø°Ø±Ø¨Ø§ÛŒØ¬Ø§Ù† Ø´Ø±Ù‚ÛŒ Ù†Ù‡ØŸ</p>
        <button class="btn" style="background:linear-gradient(to right, #9C27B0, #E040FB);margin-top:15px;" onclick="buyNotebook('Ù…Ø·Ø§Ù„Ø¹Ø§Øª')">Ø®Ø±ÛŒØ¯ (200 Ø³Ú©Ù‡)</button>
      </div>
      <button class="btn" style="background:#555;" onclick="showScreen('dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- ÙØ±ÙˆØ´Ú¯Ø§Ù‡ -->
    <div id="shop" class="screen">
      <h1>ğŸ›’ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ø±Ø§Ø¯</h1>
      <div class="profile-coins" style="font-size:1.3rem;margin:15px 0;">Ø³Ú©Ù‡ Ø´Ù…Ø§: <span id="shopCoins">0</span></div>
      
      <div class="shop-item" onclick="buyItem('music1')">
        <h3>ğŸµ Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø¢Ø±Ø§Ù…Ø´â€ŒØ¨Ø®Ø´ Û±</h3>
        <p>Ø¨Ø±Ø§ÛŒ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ù…ØªÙ…Ø±Ú©Ø²</p>
        <div class="price">150 Ø³Ú©Ù‡</div>
      </div>
      
      <div class="shop-item" onclick="buyItem('avatar1')">
        <h3>ğŸ‘‘ Ø¢ÙˆØ§ØªØ§Ø± ÙˆÛŒÚ˜Ù‡</h3>
        <p>Ø¢ÙˆØ§ØªØ§Ø± Ø·Ù„Ø§ÛŒÛŒ Ø¨Ø§ Ø¬Ù„ÙˆÙ‡ ÙˆÛŒÚ˜Ù‡</p>
        <div class="price">300 Ø³Ú©Ù‡</div>
      </div>
      
      <div class="shop-item" onclick="buyItem('theme1')">
        <h3>ğŸ¨ ØªÙ… Ø±Ù†Ú¯ÛŒ</h3>
        <p>ØªÙ… Ø¢Ø¨ÛŒ-Ø¨Ù†ÙØ´ Ø¨Ø±Ø§ÛŒ Ú†Ø´Ù…â€ŒÙ‡Ø§</p>
        <div class="price">100 Ø³Ú©Ù‡</div>
      </div>
      
      <button class="btn" style="background:#555;" onclick="showScreen('dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- ÛŒØ§Ø¯Ø¯Ø§Ø´Øª -->
    <div id="notes" class="screen">
      <h1>ğŸ“ Ø¯ÙØªØ±Ú†Ù‡ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª</h1>
      <textarea class="note-input" id="newNote" placeholder="ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..."></textarea>
      <button class="btn btn-note" onclick="saveNote()">Ø°Ø®ÛŒØ±Ù‡ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª</button>
      <div class="notes-list" id="notesList"></div>
      <button class="btn" style="background:#555;" onclick="showScreen('dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- Ø§ÛŒØ¯Ù‡â€ŒÙ¾Ø±Ø¯Ø§Ø²ÛŒ -->
    <div id="creativity" class="screen">
      <h1>ğŸ’¡ Ø§ÛŒØ¯Ù‡â€ŒÙ¾Ø±Ø¯Ø§Ø²ÛŒ</h1>
      <div class="notebook">
        <h3>ØµÙ†Ø¯Ù„ÛŒ Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ Ø¨Ø±Ø§ÛŒ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ø·ÙˆÙ„Ø§Ù†ÛŒ</h3>
        <p>Ú†Ù‡ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒÛŒ Ø¨Ø§ÛŒØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ØŸ</p>
        <p>- Ø§Ø±Ú¯ÙˆÙ†ÙˆÙ…ÛŒÚ© Ø¨Ø§Ø´Ø¯<br>- Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ… Ø§Ø±ØªÙØ§Ø¹<br>- Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø±Ø§Ø­Øª<br>- Ù¾Ø´ØªÛŒ Ø¨Ù„Ù†Ø¯ Ø¨Ø±Ø§ÛŒ Ø­Ù…Ø§ÛŒØª Ø§Ø² Ú©Ù…Ø±</p>
        <textarea class="note-input" id="ideaInput" placeholder="Ø§ÛŒØ¯Ù‡ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..."></textarea>
        <button class="btn btn-note" onclick="saveIdea()">Ø°Ø®ÛŒØ±Ù‡ Ø§ÛŒØ¯Ù‡</button>
      </div>
      <div class="notebook">
        <h3>Ú©Ù„Ø§Ø³ Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„ Ø¨Ø±Ø§ÛŒ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ</h3>
        <p>Ú†Ù‡ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒÛŒ Ø¨Ø§ÛŒØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ØŸ</p>
        <p>- Ù†ÙˆØ± Ú©Ø§ÙÛŒ Ùˆ Ø·Ø¨ÛŒØ¹ÛŒ<br>- ÙØ¶Ø§ÛŒ Ø³Ø¨Ø²<br>- ØµÙ†Ø¯Ù„ÛŒâ€ŒÙ‡Ø§ÛŒ Ø±Ø§Ø­Øª<br>- ØªØ¬Ù‡ÛŒØ²Ø§Øª Ø¯ÛŒØ¬ÛŒØªØ§Ù„</p>
      </div>
      <button class="btn" style="background:#555;" onclick="showScreen('dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- Ù…ÛŒÙ†ÛŒâ€ŒÚ¯ÛŒÙ…â€ŒÙ‡Ø§ -->
    <div id="miniGames" class="screen">
      <h1>ğŸ® Ù…ÛŒÙ†ÛŒâ€ŒÚ¯ÛŒÙ…â€ŒÙ‡Ø§</h1>
      <button class="btn btn-game" onclick="startChess()">â™Ÿï¸ Ø´Ø·Ø±Ù†Ø¬ Ø³Ø§Ø¯Ù‡</button>
      <button class="btn btn-game" onclick="startMancala()">ğŸŒ° Ù…Ù†Ú†</button>
      <button class="btn btn-game" onclick="startHouseBuilder()">ğŸ  Ø³Ø§Ø®Øª Ø®Ø§Ù†Ù‡</button>
      <button class="btn" style="background:#555;" onclick="showScreen('dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ù…Ù„ -->
    <div id="fullProfile" class="screen">
      <h1>ğŸ‘¤ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ù…Ù„</h1>
      <div class="profile-full">
        <div style="display:flex;justify-content:center;margin-bottom:20px;">
          <div class="avatar" id="fullAvatar" style="width:80px;height:80px;font-size:2rem;">A</div>
        </div>
        <h2 id="fullName">Ú©Ø§Ø±Ø¨Ø±</h2>
        <div class="profile-stats">
          <div class="stat-card">
            <div class="stat-value" id="totalCoins">0</div>
            <div class="stat-label">Ø³Ú©Ù‡ Ú©Ù„</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="playTime">0</div>
            <div class="stat-label">Ø²Ù…Ø§Ù† Ø¨Ø§Ø²ÛŒ (Ø¯Ù‚ÛŒÙ‚Ù‡)</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="level">1</div>
            <div class="stat-label">Ø³Ø·Ø­</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="totalQuestions">0</div>
            <div class="stat-label">Ø³ÙˆØ§Ù„Ø§Øª Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡</div>
          </div>
        </div>
        <div style="margin-top:20px;font-size:1.1rem;">
          <div>Ø¢ÙˆØ§ØªØ§Ø±: <span id="currentAvatar">Ù…Ø¹Ù…ÙˆÙ„ÛŒ</span></div>
          <div>ØªÙ…: <span id="currentTheme">Ù¾ÛŒØ´â€ŒÙØ±Ø¶</span></div>
        </div>
      </div>
      <button class="btn" style="background:#555;" onclick="showScreen('dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>
  </div>

  <!-- Ù¾Ù†Ø¬Ø±Ù‡ ØªÙˆØ¶ÛŒØ­Ø§Øª -->
  <div id="explanationModal" class="modal" style="display:none;">
    <div class="modal-content">
      <h2>ğŸ“š ØªÙˆØ¶ÛŒØ­ Ø¯Ø±Ø³ÛŒ</h2>
      <p id="explanationText"></p>
      <div style="text-align:center;">
        <div class="close-btn" onclick="closeModal()">Ø¨Ø³ØªÙ†</div>
      </div>
    </div>
  </div>

  <!-- ØµØ¯Ø§Ù‡Ø§ -->
  <audio id="correctSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>
  <audio id="wrongSound" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3"></audio>
  <audio id="levelUpSound" src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3"></audio>
  <audio id="music1" src="https://assets.mixkit.co/music/preview/mixkit-ambient-piano-4.mp3"></audio>

  <script>
    // ========== Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²ÛŒ ==========
    let gameState = {
      user: { 
        name: "", 
        family: "", 
        coins: 0, 
        level: 1, 
        playTime: 0,
        totalQuestions: 0,
        unlockedNotebooks: [],
        purchasedItems: [],
        notes: [],
        avatar: 'Ù…Ø¹Ù…ÙˆÙ„ÛŒ',
        theme: 'Ù¾ÛŒØ´â€ŒÙØ±Ø¶'
      },
      soundEnabled: true,
      currentFont: 'Vazirmatn',
      currentSubject: '',
      currentQuestionIndex: 0,
      score: 0,
      startTime: Date.now(),
      playTimeInterval: null
    };

    // Ø´Ø±ÙˆØ¹ Ø´Ù…Ø§Ø±Ø´ Ø²Ù…Ø§Ù† Ø¨Ø§Ø²ÛŒ
    function startPlayTime() {
      if (gameState.playTimeInterval) return;
      gameState.startTime = Date.now();
      gameState.playTimeInterval = setInterval(() => {
        const elapsed = Math.floor((Date.now() - gameState.startTime) / 60000);
        gameState.user.playTime = elapsed;
        // Ø³ÛŒØ³ØªÙ… Ø³Ø·Ø­â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø²Ù…Ø§Ù†
        const newLevel = Math.min(10, Math.floor(elapsed / 30) + 1);
        if (newLevel > gameState.user.level) {
          gameState.user.level = newLevel;
          if (newLevel === 2) gameState.user.avatar = 'Ø·Ù„Ø§ÛŒÛŒ';
          if (newLevel === 5) gameState.user.avatar = 'Ø§Ù„Ù…Ø§Ø³ÛŒ';
          if (newLevel === 10) gameState.user.avatar = 'Ø§Ø³Ø·ÙˆØ±Ù‡â€ŒØ§ÛŒ';
          playSound('levelUp');
          alert(`ØªØ¨Ø±ÛŒÚ©! Ø¨Ù‡ Ø³Ø·Ø­ ${newLevel} Ø±Ø³ÛŒØ¯ÛŒØ¯ Ùˆ Ø¢ÙˆØ§ØªØ§Ø± Ø¬Ø¯ÛŒØ¯ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯ÛŒØ¯!`);
        }
        saveGameState();
      }, 60000);
    }

    // ========== Ø³ÙˆØ§Ù„Ø§Øª Ø¯Ù‚ÛŒÙ‚ Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ… ==========
    const questions = {
      Ø±ÛŒØ§Ø¶ÛŒ: [
        { q: "Ø­Ø§ØµÙ„ Ø¹Ø¨Ø§Ø±Øª (Û³ + Û´) Ã— Û² Ú†Ù†Ø¯ Ø§Ø³ØªØŸ", o: ["Û±Û°", "Û±Û´", "Û²Û´", "Û·"], a: 1, exp: "Ø§ÙˆÙ„ Ø¯Ø§Ø®Ù„ Ù¾Ø±Ø§Ù†ØªØ² Ø±Ø§ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…: Û³+Û´=Û·ØŒ Ø³Ù¾Ø³ Û·Ã—Û²=Û±Û´." },
        { q: "Ø²Ø§ÙˆÛŒÙ‡â€ŒÛŒ Ø®Ø§Ø±Ø¬ÛŒ ÛŒÚ© Ù…Ø«Ù„Ø« Ù…ØªØ³Ø§ÙˆÛŒâ€ŒØ§Ù„Ø§Ø¶Ù„Ø§Ø¹ Ú†Ù†Ø¯ Ø¯Ø±Ø¬Ù‡ Ø§Ø³ØªØŸ", o: ["Û¶Û°", "Û¹Û°", "Û±Û²Û°", "Û±Û¸Û°"], a: 2, exp: "Ù…Ø¬Ù…ÙˆØ¹ Ø²ÙˆØ§ÛŒØ§ÛŒ Ø®Ø§Ø±Ø¬ÛŒ Ù‡Ø± Ú†Ù†Ø¯Ø¶Ù„Ø¹ÛŒ Û³Û¶Û° Ø¯Ø±Ø¬Ù‡ Ø§Ø³Øª. Ø¨Ø±Ø§ÛŒ Ù…Ø«Ù„Ø« Ù…ØªØ³Ø§ÙˆÛŒâ€ŒØ§Ù„Ø§Ø¶Ù„Ø§Ø¹: Û³Û¶Û°Ã·Û³=Û±Û²Û°." },
        // ... (Ø¨Ù‚ÛŒÙ‡ Ø³ÙˆØ§Ù„Ø§Øª Ù…Ø´Ø§Ø¨Ù‡ Ù†Ø³Ø®Ù‡ Ù‚Ø¨Ù„ÛŒ ÙˆÙ„ÛŒ Ø¨Ø§ ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¯Ø§Ø®Ù„ Ø¨Ø§Ø²ÛŒ)
      ],
      Ø¹Ù„ÙˆÙ…: [
        { q: "Ú©Ø¯Ø§Ù… Ú¯Ø²ÛŒÙ†Ù‡ Ø¬Ø²Ø¡ Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø±ÙˆÙ†ÛŒ Ø²Ù…ÛŒÙ† Ù†ÛŒØ³ØªØŸ", o: ["Ù‡Ø³ØªÙ‡", "Ú¯ÙˆØ´ØªÙ‡", "Ù¾ÙˆØ³ØªÙ‡", "ÛŒÙˆÙ†ÙˆØ³ÙØ±"], a: 3, exp: "ÛŒÙˆÙ†ÙˆØ³ÙØ± Ø¬Ø²Ø¡ Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø¬Ùˆ Ø§Ø³ØªØŒ Ù†Ù‡ Ø¯Ø±ÙˆÙ† Ø²Ù…ÛŒÙ†." },
        // ...
      ],
      ÙØ§Ø±Ø³ÛŒ: [
        { q: "ÙØ¹Ù„ Â«Ø®ÙˆØ§Ù‡Ù… Ø±ÙØªÂ» Ø§Ø² Ú†Ù‡ Ù†ÙˆØ¹ Ø§ÙØ¹Ø§Ù„ÛŒ Ø§Ø³ØªØŸ", o: ["Ù…Ø§Ø¶ÛŒ Ø§Ø³ØªÙ…Ø±Ø§Ø±ÛŒ", "Ù…Ø³ØªÙ‚Ø¨Ù„", "Ù…Ø¶Ø§Ø±Ø¹", "Ù…Ø§Ø¶ÛŒ Ø¨Ø¹ÛŒØ¯"], a: 1, exp: "Ø§ÙØ¹Ø§Ù„ÛŒ Ú©Ù‡ Ø¨Ø§ Â«Ø®ÙˆØ§Ù‡Ù…ØŒ Ø®ÙˆØ§Ù‡ÛŒØŒ ...Â» Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ØŒ ÙØ¹Ù„ Ù…Ø³ØªÙ‚Ø¨Ù„ Ù‡Ø³ØªÙ†Ø¯." },
        // ...
      ],
      Ù…Ø·Ø§Ù„Ø¹Ø§Øª: [
        { q: "Ù…Ø±Ú©Ø² Ø§Ø³ØªØ§Ù† ÙØ§Ø±Ø³ Ú©Ø¯Ø§Ù… Ø´Ù‡Ø± Ø§Ø³ØªØŸ", o: ["Ø´ÛŒØ±Ø§Ø²", "Ø§ØµÙÙ‡Ø§Ù†", "ØªØ¨Ø±ÛŒØ²", "Ù…Ø´Ù‡Ø¯"], a: 0, exp: "Ø´ÛŒØ±Ø§Ø² Ù…Ø±Ú©Ø² Ø§Ø³ØªØ§Ù† ÙØ§Ø±Ø³ Ø§Ø³Øª." },
        // ...
      ],
      Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ: [
        { q: "What is the English word for 'Ú©ØªØ§Ø¨'?", o: ["Book", "Pen", "Desk", "Chair"], a: 0, exp: "'Ú©ØªØ§Ø¨' Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Book Ø§Ø³Øª." },
        // ...
      ]
    };

    // ========== ØªÙˆØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ ==========
    function showScreen(id) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      if (id === 'dashboard') {
        updateHeader();
        startPlayTime();
      }
      if (id === 'fullProfile') updateFullProfile();
      if (id === 'shop') document.getElementById('shopCoins').innerText = gameState.user.coins;
    }

    function registerUser() {
      const firstName = document.getElementById('firstName').value.trim();
      const lastName = document.getElementById('lastName').value.trim();
      if (!firstName || !lastName) {
        alert('Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯!');
        return;
      }
      gameState.user.name = firstName;
      gameState.user.family = lastName;
      gameState.user.coins = 0;
      gameState.user.level = 1;
      saveGameState();
      showScreen('dashboard');
    }

    function updateHeader() {
      const firstLetter = gameState.user.name.charAt(0).toUpperCase();
      document.getElementById('headerAvatar').innerText = firstLetter;
      document.getElementById('headerName').innerText = `${gameState.user.name} ${gameState.user.family}`;
      document.getElementById('headerCoins').innerText = gameState.user.coins;
      
      document.getElementById('quizAvatar').innerText = firstLetter;
      document.getElementById('quizName').innerText = `${gameState.user.name} ${gameState.user.family}`;
      document.getElementById('quizCoins').innerText = gameState.user.coins;
    }

    function updateFullProfile() {
      document.getElementById('fullAvatar').innerText = gameState.user.name.charAt(0).toUpperCase();
      document.getElementById('fullName').innerText = `${gameState.user.name} ${gameState.user.family}`;
      document.getElementById('totalCoins').innerText = gameState.user.coins;
      document.getElementById('playTime').innerText = gameState.user.playTime;
      document.getElementById('level').innerText = gameState.user.level;
      document.getElementById('totalQuestions').innerText = gameState.user.totalQuestions;
      document.getElementById('currentAvatar').innerText = gameState.user.avatar;
      document.getElementById('currentTheme').innerText = gameState.user.theme;
    }

    function startBattle(subject) {
      gameState.currentSubject = subject;
      gameState.currentQuestionIndex = 0;
      gameState.score = 0;
      showScreen('quiz');
      loadQuestion();
    }

    function loadQuestion() {
      const qList = questions[gameState.currentSubject];
      if (!qList || gameState.currentQuestionIndex >= qList.length) {
        alert(`Ø¢Ø²Ù…ÙˆÙ† ØªÙ…Ø§Ù… Ø´Ø¯!\nØ§Ù…ØªÛŒØ§Ø² Ø´Ù…Ø§: ${gameState.score}\nØ³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØªÛŒ: ${gameState.score * 5}`);
        gameState.user.coins += gameState.score * 5; // Ú©Ù…ØªØ± Ø§Ø² Ù‚Ø¨Ù„
        gameState.user.totalQuestions += gameState.currentQuestionIndex;
        saveGameState();
        showScreen('dashboard');
        return;
      }
      const q = qList[gameState.currentQuestionIndex];
      document.getElementById('question').innerText = `${gameState.currentQuestionIndex + 1}. ${q.q}`;
      const optionsDiv = document.getElementById('options');
      optionsDiv.innerHTML = '';
      q.o.forEach((opt, i) => {
        const btn = document.createElement('div');
        btn.className = 'option-card';
        btn.innerText = opt;
        btn.onclick = () => selectOption(i, q);
        optionsDiv.appendChild(btn);
      });
    }

    function selectOption(selectedIndex, q) {
      const options = document.querySelectorAll('#options .option-card');
      
      // Ø±Ù†Ú¯â€ŒØ¢Ù…ÛŒØ²ÛŒ
      options.forEach((opt, i) => {
        if (i === q.a) opt.classList.add('correct');
        else if (i === selectedIndex) opt.classList.add('wrong');
      });

      const isCorrect = selectedIndex === q.a;
      if (isCorrect) {
        gameState.score += 10;
        playSound('correct');
      } else {
        playSound('wrong');
      }

      // Ù†Ù…Ø§ÛŒØ´ ØªÙˆØ¶ÛŒØ­ Ø¯Ø§Ø®Ù„ Ø¨Ø§Ø²ÛŒ
      setTimeout(() => {
        document.getElementById('explanationText').innerText = q.exp;
        document.getElementById('explanationModal').style.display = 'flex';
      }, 1500);
    }

    function closeModal() {
      document.getElementById('explanationModal').style.display = 'none';
      gameState.currentQuestionIndex++;
      loadQuestion();
    }

    function buyNotebook(subject) {
      if (gameState.user.unlockedNotebooks.includes(subject)) {
        alert('Ø§ÛŒÙ† Ø¬Ø²ÙˆÙ‡ Ù‚Ø¨Ù„Ø§Ù‹ Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª!');
        return;
      }
      if (gameState.user.coins >= 200) {
        gameState.user.coins -= 200;
        gameState.user.unlockedNotebooks.push(subject);
        saveGameState();
        alert(`Ø¬Ø²ÙˆÙ‡ "${subject}" Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ø´Ø¯!`);
      } else {
        alert('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯! (Ù†ÛŒØ§Ø² Ø¨Ù‡ 200 Ø³Ú©Ù‡)');
      }
    }

    function buyItem(item) {
      const prices = { music1: 150, avatar1: 300, theme1: 100 };
      const price = prices[item];
      if (gameState.user.coins >= price) {
        gameState.user.coins -= price;
        gameState.user.purchasedItems.push(item);
        if (item === 'avatar1') gameState.user.avatar = 'Ø·Ù„Ø§ÛŒÛŒ';
        if (item === 'theme1') gameState.user.theme = 'Ø¢Ø¨ÛŒ-Ø¨Ù†ÙØ´';
        if (item === 'music1') {
          const music = document.getElementById('music1');
          music.currentTime = 0;
          music.play().catch(e => console.log("Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ù¾Ø®Ø´ Ù†Ø´Ø¯:", e));
        }
        saveGameState();
        alert('Ø®Ø±ÛŒØ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!');
      } else {
        alert(`Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯! (Ù†ÛŒØ§Ø² Ø¨Ù‡ ${price} Ø³Ú©Ù‡)`);
      }
    }

    function saveNote() {
      const note = document.getElementById('newNote').value.trim();
      if (note) {
        gameState.user.notes.push(note);
        document.getElementById('newNote').value = '';
        saveGameState();
        loadNotes();
        alert('ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯!');
      }
    }

    function loadNotes() {
      const notesList = document.getElementById('notesList');
      notesList.innerHTML = '';
      gameState.user.notes.forEach((note, i) => {
        const div = document.createElement('div');
        div.className = 'note-item';
        div.innerText = note;
        notesList.appendChild(div);
      });
    }

    function saveIdea() {
      const idea = document.getElementById('ideaInput').value.trim();
      if (idea) {
        gameState.user.notes.push(`Ø§ÛŒØ¯Ù‡: ${idea}`);
        document.getElementById('ideaInput').value = '';
        saveGameState();
        alert('Ø§ÛŒØ¯Ù‡ Ø´Ù…Ø§ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯!');
      }
    }

    function startChess() {
      alert('Ø´Ø·Ø±Ù†Ø¬ Ø³Ø§Ø¯Ù‡ Ø¢Ù…Ø§Ø¯Ù‡ Ø´Ø¯! (Ø¯Ø± Ù†Ø³Ø®Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡ Ú©Ø§Ù…Ù„â€ŒØªØ± Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯)');
    }

    function startMancala() {
      alert('Ù…Ù†Ú† Ø¢Ù…Ø§Ø¯Ù‡ Ø´Ø¯! (Ø¯Ø± Ù†Ø³Ø®Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡ Ú©Ø§Ù…Ù„â€ŒØªØ± Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯)');
    }

    function startHouseBuilder() {
      alert('Ø³Ø§Ø®Øª Ø®Ø§Ù†Ù‡ Ø¨Ø§ Ø§ÛŒÙ…ÙˆØ¬ÛŒ Ø¢Ù…Ø§Ø¯Ù‡ Ø´Ø¯! (Ø¯Ø± Ù†Ø³Ø®Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡ Ú©Ø§Ù…Ù„â€ŒØªØ± Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯)');
    }

    function playSound(type) {
      if (!gameState.soundEnabled) return;
      const sound = document.getElementById(type + 'Sound');
      if (sound) {
        sound.currentTime = 0;
        sound.play().catch(e => console.log("ØµØ¯Ø§ Ù¾Ø®Ø´ Ù†Ø´Ø¯:", e));
      }
    }

    function saveGameState() {
      localStorage.setItem('aradQuizStateUltra', JSON.stringify(gameState));
    }

    function loadGameState() {
      const saved = localStorage.getItem('aradQuizStateUltra');
      if (saved) {
        try {
          const parsed = JSON.parse(saved);
          gameState = { ...gameState, ...parsed };
          if (gameState.user.name) {
            showScreen('dashboard');
            updateHeader();
            startPlayTime();
          }
        } catch (e) {
          console.log("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ state:", e);
        }
      }
    }

    // ========== Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ==========
    window.onload = function() {
      loadGameState();
    };
  </script>
</body>
  </html>
