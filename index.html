<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <meta name="description" content="Ø¢Ø±Ø§Ø¯ Ú©ÙˆØ¦ÛŒØ² â€“ Ù†Ø³Ø®Ù‡ Ø§Ø¨Ø±ØºÙˆÙ„ 3.0: Ø¨Ø§Ø²ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ… Ø¨Ø§ 500 Ø³ÙˆØ§Ù„ Ø¯Ù‚ÛŒÙ‚ØŒ Ø¢Ù…ÙˆØ²Ø´ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒØŒ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ù¾ÛŒØ´Ø±ÙØªÙ‡ØŒ Ù…ÛŒÙ†ÛŒâ€ŒÚ¯ÛŒÙ…â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù…Ù„ Ùˆ Ø¯Ù†ÛŒØ§ÛŒÛŒ Ú©Ù‡ Ù‡Ø± 2 Ù‡ÙØªÙ‡ Ø±Ø´Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯!">
  <meta name="keywords" content="Ø¨Ø§Ø²ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ, Ù¾Ø§ÛŒÙ‡ Ù‡ÙØªÙ…, Ø¢Ø±Ø§Ø¯ Ù…Ù‚Ø¯Ù…, Ø±ÛŒØ§Ø¶ÛŒ Ù‡ÙØªÙ…, Ø¹Ù„ÙˆÙ… Ù‡ÙØªÙ…, ÙØ§Ø±Ø³ÛŒ Ù‡ÙØªÙ…, Ù…Ø·Ø§Ù„Ø¹Ø§Øª Ù‡ÙØªÙ…, Ø¢Ù…ÙˆØ²Ø´ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ, Ø¨Ø§Ø²ÛŒ Ø±Ù‚Ø§Ø¨ØªÛŒ, Ø¬Ø²ÙˆÙ‡ Ø¯Ø±Ø³ÛŒ">
  <meta name="author" content="Ø¢Ø±Ø§Ø¯ Ù…Ù‚Ø¯Ù…">
  <title>Ø¢Ø±Ø§Ø¯ Ú©ÙˆØ¦ÛŒØ² â€“ Ù†Ø³Ø®Ù‡Ù” Ø§Ø¨Ø±ØºÙˆÙ„ 3.0</title>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&family=Shabnam:wght@400;700&family=Samim:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #6A11CB;
      --secondary: #2575FC;
      --success: #00C853;
      --danger: #FF5252;
      --warning: #FFD700;
      --info: #2196F3;
      --light: #f8f9fa;
      --dark: #212529;
      --glass: rgba(255, 255, 255, 0.1);
      --glass-border: rgba(255, 255, 255, 0.2);
    }
    * {
      margin: 0; padding: 0; box-sizing: border-box;
    }
    body {
      background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
      color: white; min-height: 100vh; padding: 0;
      text-align: center; overflow-x: hidden;
    }
    .header {
      background: rgba(0, 0, 0, 0.3);
      padding: 10px; display: flex; justify-content: space-between;
      align-items: center; box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }
    .profile-summary {
      display: flex; align-items: center; gap: 10px;
      cursor: pointer;
    }
    .avatar {
      width: 40px; height: 40px; border-radius: 50%;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      display: flex; align-items: center; justify-content: center;
      font-size: 1.2rem; color: white; font-weight: bold;
    }
    .profile-info {
      text-align: right;
    }
    .profile-name {
      font-size: 1.1rem; font-weight: bold;
    }
    .profile-coins {
      font-size: 0.9rem; color: var(--warning);
    }
    .container {
      max-width: 600px; margin: 0 auto; padding: 15px;
    }
    h1 {
      font-size: 2.2rem; margin: 15px 0;
      background: linear-gradient(to right, #ff9a9e, #fad0c4, #fbc2eb, #a6c1ee);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    .btn {
      display: block; width: 90%; padding: 16px; margin: 14px auto;
      border: none; border-radius: 25px; font-size: 1.4rem; font-weight: bold;
      color: white; cursor: pointer; transition: all 0.3s;
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
    }
    .btn-primary { background: linear-gradient(to right, #6A11CB, #2575FC); }
    .btn-battle { background: linear-gradient(to right, #FF416C, #FF4B2B); }
    .btn-shop { background: linear-gradient(to right, #FF8C00, #FF4500); }
    .btn-learn { background: linear-gradient(to right, #00C9FF, #92FE9D); }
    .btn-game { background: linear-gradient(to right, #834d9b, #d04ed6); }
    .btn-note { background: linear-gradient(to right, #FFD700, #FFA500); color: #333; }
    .btn-settings { background: linear-gradient(to right, #00C853, #64DD17); }
    .btn-end-battle { 
      background: linear-gradient(to right, #FF5252, #FF0000); 
      margin-top: 20px;
    }
    .screen { display: none; }
    .active { display: block; }
    
    /* Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ú¯Ø²ÛŒÙ†Ù‡ - Ø±Ù†Ú¯â€ŒØ¨Ù†Ø¯ÛŒ Ø¬Ø¯ÛŒØ¯ */
    .option-card {
      background: var(--glass);
      backdrop-filter: blur(10px);
      border: 2px solid var(--glass-border);
      margin: 12px auto; padding: 18px;
      border-radius: 20px; width: 92%; font-size: 1.3rem;
      cursor: pointer; transition: all 0.25s;
      box-shadow: 0 6px 15px rgba(0,0,0,0.2);
      font-weight: bold;
    }
    .option-card:hover {
      background: rgba(255, 255, 255, 0.18);
      transform: scale(1.03);
      border-color: #ffffff;
    }
    .option-card.correct {
      background: rgba(0, 200, 83, 0.4) !important;
      border-color: #00c853;
      transform: scale(1.05);
    }
    .option-card.wrong {
      background: rgba(255, 82, 82, 0.4) !important;
      border-color: #ff5252;
      transform: scale(1.05);
    }
    
    /* Ù¾Ù†Ø¬Ø±Ù‡ ØªÙˆØ¶ÛŒØ­Ø§Øª */
    .modal {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.85); display: flex; align-items: center;
      justify-content: center; z-index: 1000;
    }
    .modal-content {
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      padding: 30px; border-radius: 30px; width: 90%; max-width: 550px;
      box-shadow: 0 15px 40px rgba(0,0,0,0.6);
      border: 3px solid var(--warning);
    }
    .modal h2 {
      color: var(--warning); margin-bottom: 20px;
      font-size: 1.8rem;
      text-shadow: 0 0 10px rgba(255,215,0,0.5);
    }
    .modal p {
      font-size: 1.3rem; line-height: 1.7;
      margin-bottom: 25px;
      color: #e0e0ff;
    }
    .close-btn {
      background: var(--danger); padding: 12px 25px;
      border-radius: 20px; color: white; font-weight: bold;
      cursor: pointer; font-size: 1.2rem;
      transition: all 0.3s;
    }
    .close-btn:hover {
      background: #ff0000;
      transform: scale(1.05);
    }
    
    /* Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ù…Ù„ */
    .profile-full {
      background: var(--glass);
      backdrop-filter: blur(15px);
      border-radius: 30px; padding: 30px; margin: 25px 0;
      box-shadow: 0 10px 35px rgba(0,0,0,0.4);
      border: 2px solid rgba(255,255,255,0.1);
    }
    .profile-full h2 {
      margin-bottom: 25px; color: var(--warning);
      font-size: 1.8rem;
    }
    .profile-stats {
      display: grid; grid-template-columns: repeat(2, 1fr);
      gap: 20px; margin: 25px 0;
    }
    .stat-card {
      background: rgba(0,0,0,0.25); padding: 20px;
      border-radius: 20px; text-align: center;
      backdrop-filter: blur(5px);
    }
    .stat-value {
      font-size: 1.6rem; font-weight: bold;
      color: var(--info);
    }
    .stat-label {
      font-size: 1.0rem; opacity: 0.85;
    }
    
    /* Ø¬Ø²ÙˆÙ‡â€ŒÙ‡Ø§ Ùˆ Ø¢Ù…ÙˆØ²Ø´â€ŒÙ‡Ø§ */
    .notebook {
      background: var(--glass);
      backdrop-filter: blur(12px);
      border-radius: 25px; padding: 25px; margin: 20px 0;
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
      border: 1px solid var(--glass-border);
    }
    .notebook h3 {
      color: var(--warning); margin-bottom: 15px;
      font-size: 1.5rem;
    }
    .notebook p {
      font-size: 1.2rem; line-height: 1.8;
      margin-bottom: 12px;
      color: #f0f0ff;
    }
    
    /* ÙØ±ÙˆØ´Ú¯Ø§Ù‡ */
    .shop-item {
      background: var(--glass);
      backdrop-filter: blur(10px);
      border: 2px solid var(--glass-border);
      border-radius: 25px; padding: 25px; margin: 20px;
      cursor: pointer; transition: all 0.4s;
    }
    .shop-item:hover {
      background: rgba(255,255,255,0.2);
      transform: translateY(-8px);
      border-color: #ffffff;
    }
    .shop-item h3 {
      color: var(--warning); margin-bottom: 15px;
      font-size: 1.4rem;
    }
    .shop-item .price {
      color: var(--success); font-weight: bold;
      font-size: 1.3rem;
    }
    
    /* ØªÙ†Ø¸ÛŒÙ…Ø§Øª */
    .settings-item {
      background: var(--glass);
      backdrop-filter: blur(8px);
      border-radius: 20px; padding: 20px; margin: 15px;
      text-align: right;
    }
    .settings-item h3 {
      color: var(--info); margin-bottom: 10px;
    }
    .copy-link {
      background: rgba(0,0,0,0.3); padding: 12px;
      border-radius: 15px; margin: 10px 0;
      font-size: 1.1rem;
      word-break: break-all;
    }
    .toggle-btn {
      background: var(--danger); padding: 8px 15px;
      border-radius: 15px; color: white;
      cursor: pointer; margin-left: 10px;
    }
    .toggle-btn.active {
      background: var(--success);
    }
    
    /* Ù…ÛŒÙ†ÛŒâ€ŒÚ¯ÛŒÙ…â€ŒÙ‡Ø§ */
    .game-board {
      display: grid; grid-template-columns: repeat(3, 1fr);
      gap: 15px; margin: 25px auto;
      max-width: 350px;
    }
    .game-cell {
      aspect-ratio: 1/1; background: var(--glass);
      border-radius: 15px; display: flex; align-items: center;
      justify-content: center; font-size: 2rem;
      cursor: pointer;
      border: 2px solid var(--glass-border);
    }
    .game-cell:hover {
      background: rgba(255,255,255,0.15);
    }
    
    /* ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¨Ø§Ø²ÛŒ */
    .game-info {
      background: rgba(0,0,0,0.3); padding: 20px;
      border-radius: 20px; margin: 25px 0;
      line-height: 1.7;
      font-size: 1.1rem;
    }
    
    /* ÙÙˆÙ†Øª ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡ */
    .welcome-text {
      font-size: 1.3rem;
      line-height: 1.8;
      margin: 20px 0;
      padding: 20px;
      background: rgba(0,0,0,0.2);
      border-radius: 20px;
      border-left: 4px solid var(--warning);
    }
    
    /* Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ - Ø·Ø±Ø­ Ø®ÙÙ† */
    .main-btn {
      position: relative;
      overflow: hidden;
    }
    .main-btn::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
      transform: rotate(30deg);
      transition: all 0.6s;
    }
    .main-btn:hover::before {
      transform: rotate(30deg) translate(50%, 50%);
    }
    
    @media (max-width: 480px) {
      h1 { font-size: 1.9rem; }
      .btn { font-size: 1.3rem; padding: 14px; }
      .header { padding: 8px; }
      .avatar { width: 35px; height: 35px; font-size: 1.1rem; }
      .option-card { font-size: 1.2rem; padding: 16px; }
    }
  </style>
</head>
<body>
  <!-- Ù‡Ø¯Ø± Ø¨Ø§ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø¯Ø§Ø¦Ù…ÛŒ -->
  <div class="header">
    <div class="profile-summary" onclick="showScreen('fullProfile')">
      <div class="avatar" id="headerAvatar">A</div>
      <div class="profile-info">
        <div class="profile-name" id="headerName">Ú©Ø§Ø±Ø¨Ø±</div>
        <div class="profile-coins">Ø³Ú©Ù‡: <span id="headerCoins">0</span></div>
      </div>
    </div>
    <div style="font-size:0.9rem;opacity:0.8;">Ø¢Ø±Ø§Ø¯ Ù…Ù‚Ø¯Ù…</div>
  </div>

  <div class="container">
    <!-- ØµÙØ­Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… -->
    <div id="register" class="screen active">
      <h1>ğŸ® Ø¢Ø±Ø§Ø¯ Ú©ÙˆØ¦ÛŒØ² ğŸ®</h1>
      <div class="welcome-text">
        <p>ğŸŒŸ <strong>Ø§ÛŒÙ† Ø¨Ø§Ø²ÛŒ Ù‡Ø± Û² Ù‡ÙØªÙ‡ ÛŒÚ©Ø¨Ø§Ø± Ø¢Ù¾Ø¯ÛŒØª Ù…ÛŒâ€ŒØ´ÙˆØ¯!</strong></p>
        <p>âœ¨ Ø¨Ø§Ú¯â€ŒÙ‡Ø§ Ø±ÙØ¹ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ Ùˆ Ú†ÛŒØ²Ù‡Ø§ÛŒ Ø¨Ø³ÛŒØ§Ø± Ø¬Ø°Ø§Ø¨ Ø¨Ù‡ Ø¨Ø§Ø²ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
        <p>ğŸ“š Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ ØªÙˆØ³Ø·: <strong>Ø¢Ø±Ø§Ø¯ Ù…Ù‚Ø¯Ù…</strong></p>
        <p>ğŸš€ Ù†Ø³Ø®Ù‡Ù” Ø§Ø¨Ø±ØºÙˆÙ„ 3.0 â€” Ø¯Ù†ÛŒØ§ÛŒÛŒ Ú©Ù‡ Ù‡Ø± Ø±ÙˆØ² Ø±Ø´Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯!</p>
      </div>
      <input type="text" id="firstName" placeholder="Ù†Ø§Ù…" style="width:90%;padding:14px;margin:12px;border-radius:18px;border:none;font-size:1.3rem;text-align:center;background:rgba(255,255,255,0.12);color:white;">
      <input type="text" id="lastName" placeholder="Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ" style="width:90%;padding:14px;margin:12px;border-radius:18px;border:none;font-size:1.3rem;text-align:center;background:rgba(255,255,255,0.12);color:white;">
      <button class="btn btn-primary main-btn" onclick="registerUser()">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø¯Ù†ÛŒØ§ÛŒ Ø¢Ø±Ø§Ø¯</button>
      <p style="font-size:1.15rem;margin-top:25px;color:#ffcc00;opacity:0.9;">
        Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ ØªÙˆØ³Ø·: Ø¢Ø±Ø§Ø¯ Ù…Ù‚Ø¯Ù…<br>
        <span style="font-size:0.95rem;">Ù†Ø³Ø®Ù‡Ù” Ø§Ø¨Ø±ØºÙˆÙ„ 3.0 - ØªÙ…Ø§Ù… Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª</span>
      </p>
    </div>

    <!-- Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø§ØµÙ„ÛŒ -->
    <div id="dashboard" class="screen">
      <h1>ğŸŒŒ Ø¯Ù†ÛŒØ§ÛŒ Ø¢Ø±Ø§Ø¯ 3.0</h1>
      <button class="btn btn-battle main-btn" onclick="showScreen('battleSelect')">âš”ï¸ Ø±Ù‚Ø§Ø¨Øª Ø¨Ø§ Ø±Ø¨Ø§Øª</button>
      <button class="btn btn-learn main-btn" onclick="showScreen('learning')">ğŸ“š Ø¢Ù…ÙˆØ²Ø´â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</button>
      <button class="btn btn-shop main-btn" onclick="showScreen('shop')">ğŸ›’ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</button>
      <button class="btn btn-note main-btn" onclick="showScreen('notes')">ğŸ“ Ø¯ÙØªØ±Ú†Ù‡ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª</button>
      <button class="btn" style="background:linear-gradient(to right, #FF416C, #FF4B2B);" onclick="showScreen('creativity')">ğŸ’¡ Ø§ÛŒØ¯Ù‡â€ŒÙ¾Ø±Ø¯Ø§Ø²ÛŒ</button>
      <button class="btn btn-game main-btn" onclick="showScreen('miniGames')">ğŸ® Ù…ÛŒÙ†ÛŒâ€ŒÚ¯ÛŒÙ…â€ŒÙ‡Ø§</button>
      <button class="btn btn-settings main-btn" onclick="showScreen('settings')">âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
    </div>

    <!-- Ø§Ù†ØªØ®Ø§Ø¨ Ø­Ø§Ù„Øª Ø±Ù‚Ø§Ø¨Øª -->
    <div id="battleSelect" class="screen">
      <h1>Ø­Ø§Ù„Øª Ø±Ù‚Ø§Ø¨Øª Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†</h1>
      <button class="btn" style="background:linear-gradient(to right, #FF9A00, #FF4500);" onclick="startBattle('Ø±ÛŒØ§Ø¶ÛŒ')">Ø±ÛŒØ§Ø¶ÛŒ (100 Ø³ÙˆØ§Ù„)</button>
      <button class="btn" style="background:linear-gradient(to right, #00C853, #00E676);" onclick="startBattle('Ø¹Ù„ÙˆÙ…')">Ø¹Ù„ÙˆÙ… (100 Ø³ÙˆØ§Ù„)</button>
      <button class="btn" style="background:linear-gradient(to right, #2196F3, #21CBF3);" onclick="startBattle('ÙØ§Ø±Ø³ÛŒ')">ÙØ§Ø±Ø³ÛŒ (100 Ø³ÙˆØ§Ù„)</button>
      <button class="btn" style="background:linear-gradient(to right, #9C27B0, #E040FB);" onclick="startBattle('Ù…Ø·Ø§Ù„Ø¹Ø§Øª')">Ù…Ø·Ø§Ù„Ø¹Ø§Øª Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ (100 Ø³ÙˆØ§Ù„)</button>
      <button class="btn" style="background:linear-gradient(to right, #FF5252, #FF7B7B);" onclick="startBattle('Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ')">Ø²Ø¨Ø§Ù† Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ (100 Ø³ÙˆØ§Ù„)</button>
      <button class="btn" style="background:#555;" onclick="showScreen('dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- ØµÙØ­Ù‡ Ø¢Ø²Ù…ÙˆÙ† -->
    <div id="quiz" class="screen">
      <div class="profile-summary" style="justify-content:center;margin-bottom:25px;">
        <div class="avatar" id="quizAvatar">A</div>
        <div class="profile-info" style="text-align:left;margin-left:12px;">
          <div class="profile-name" id="quizName">Ú©Ø§Ø±Ø¨Ø±</div>
          <div class="profile-coins">Ø³Ú©Ù‡: <span id="quizCoins">0</span></div>
        </div>
      </div>
      <div class="question-box" id="question" style="background:rgba(0,0,0,0.35);padding:25px;border-radius:25px;margin:25px 0;font-size:1.5rem;line-height:1.6;"></div>
      <div id="options"></div>
      <button class="btn btn-end-battle" onclick="endBattle()">Ù¾Ø§ÛŒØ§Ù† Ø±Ù‚Ø§Ø¨Øª Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ø³Ú©Ù‡</button>
    </div>

    <!-- Ø¢Ù…ÙˆØ²Ø´â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ -->
    <div id="learning" class="screen">
      <h1>ğŸ¤– Ø¢Ù…ÙˆØ²Ø´â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</h1>
      <div class="notebook">
        <h3>ğŸ§  Ø¢Ù…ÙˆØ²Ø´ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</h3>
        <p>â€¢ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ ÛŒÚ© Ø§Ø¨Ø²Ø§Ø± Ú©Ù…Ú©ÛŒ Ø¨Ø±Ø§ÛŒ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø§Ø³ØªØŒ Ù†Ù‡ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ù…ØºØ² Ø´Ù…Ø§.</p>
        <p>â€¢ Ù‡Ù…ÛŒØ´Ù‡ Ø³Ø¤Ø§Ù„Ø§Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ù‚ÛŒÙ‚ Ùˆ ÙˆØ§Ø¶Ø­ Ù…Ø·Ø±Ø­ Ú©Ù†ÛŒØ¯.</p>
        <p>â€¢ Ø§Ø² Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø¨Ø±Ø§ÛŒ ØªÙˆØ¶ÛŒØ­ Ù…ÙØ§Ù‡ÛŒÙ… Ù¾ÛŒÚ†ÛŒØ¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.</p>
        <p>â€¢ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø±Ø§ Ø¨Ø§ Ù…Ù†Ø§Ø¨Ø¹ Ù…Ø¹ØªØ¨Ø± Ú†Ú© Ú©Ù†ÛŒØ¯.</p>
        <p>â€¢ Ø¨Ø±Ø§ÛŒ Ø­Ù„ Ù…Ø³Ø§Ø¦Ù„ØŒ Ø§Ø¨ØªØ¯Ø§ Ø®ÙˆØ¯ØªØ§Ù† ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯ØŒ Ø³Ù¾Ø³ Ø§Ø² Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ú©Ù…Ú© Ø¨Ú¯ÛŒØ±ÛŒØ¯.</p>
        <p>â€¢ Ø§Ø² Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø¨Ø±Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯ Ø§ÛŒØ¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ù„Ø§Ù‚Ø§Ù†Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.</p>
        <p>â€¢ Ù‡Ù…ÛŒØ´Ù‡ ÙÚ©Ø± Ø§Ù†ØªÙ‚Ø§Ø¯ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯ Ùˆ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ Ø±Ø§ ØªØµØ¯ÛŒÙ‚ Ú©Ù†ÛŒØ¯.</p>
        <p>â€¢ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø±Ø§ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù…Ø¹Ù„Ù… Ù…Ø¬Ø§Ø²ÛŒ Ø®ÙˆØ¯ Ø¯Ø± Ù†Ø¸Ø± Ø¨Ú¯ÛŒØ±ÛŒØ¯.</p>
        <button class="btn" style="background:linear-gradient(to right, #834d9b, #d04ed6);margin-top:20px;" onclick="buyAI('Ø§Ø³ØªÙØ§Ø¯Ù‡')">Ø®Ø±ÛŒØ¯ (300 Ø³Ú©Ù‡)</button>
      </div>
      <div class="notebook">
        <h3>ğŸ›ï¸ ØªÙ…Ø¯Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø³ØªØ§Ù†ÛŒ Ø§ÛŒØ±Ø§Ù†</h3>
        <p><strong>Ù‡Ø®Ø§Ù…Ù†Ø´ÛŒØ§Ù† (550-330 Ù¾ÛŒØ´ Ø§Ø² Ù…ÛŒÙ„Ø§Ø¯):</strong></p>
        <p>â€¢ Ø¨Ù†ÛŒØ§Ù†â€ŒÚ¯Ø°Ø§Ø±: Ú©ÙˆØ±ÙˆØ´ Ø¨Ø²Ø±Ú¯</p>
        <p>â€¢ Ù¾Ø§ÛŒØªØ®Øª: ØªØ®Øª Ø¬Ù…Ø´ÛŒØ¯ØŒ Ø´ÙˆØ´ØŒ Ù‡Ù…Ø¯Ø§Ù†</p>
        <p>â€¢ Ø¯Ø³ØªØ§ÙˆØ±Ø¯Ù‡Ø§: Ø¬Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ù„Ø·Ù†ØªÛŒØŒ Ø³ÛŒØ³ØªÙ… Ù¾Ø³ØªØŒ Ø¢Ø²Ø§Ø¯ÛŒ Ø§Ø¯ÛŒØ§Ù†</p>
        <p><strong>Ø§Ø´Ú©Ø§Ù†ÛŒØ§Ù† (247 Ù¾ÛŒØ´ Ø§Ø² Ù…ÛŒÙ„Ø§Ø¯ - 224 Ù…ÛŒÙ„Ø§Ø¯ÛŒ):</strong></p>
        <p>â€¢ Ø¨Ù†ÛŒØ§Ù†â€ŒÚ¯Ø°Ø§Ø±: Ø§Ø´Ú©</p>
        <p>â€¢ Ù¾Ø§ÛŒØªØ®Øª: Ù†Ø³Ø§ØŒ Ù‡Ú©Ø§ØªÙˆÙ…Ù¾ÛŒÙ„ÙˆØ³</p>
        <p>â€¢ Ø¯Ø³ØªØ§ÙˆØ±Ø¯Ù‡Ø§: Ù…Ù‚Ø§ÙˆÙ…Øª Ø¯Ø± Ø¨Ø±Ø§Ø¨Ø± Ø±ÙˆÙ…ØŒ Ø­Ù…Ø§ÛŒØª Ø§Ø² Ø²Ø±ØªØ´ØªÛŒ</p>
        <p><strong>Ø³Ø§Ø³Ø§Ù†ÛŒØ§Ù† (224-651 Ù…ÛŒÙ„Ø§Ø¯ÛŒ):</strong></p>
        <p>â€¢ Ø¨Ù†ÛŒØ§Ù†â€ŒÚ¯Ø°Ø§Ø±: Ø§Ø±Ø¯Ø´ÛŒØ± Ø¨Ø§Ø¨Ú©Ø§Ù†</p>
        <p>â€¢ Ù¾Ø§ÛŒØªØ®Øª: ØªÛŒØ³Ù¾ÙˆÙ†ØŒ Ù…Ø¯Ø§Ø¦Ù†</p>
        <p>â€¢ Ø¯Ø³ØªØ§ÙˆØ±Ø¯Ù‡Ø§: Ù†Ø¸Ø§Ù… Ø§Ø¯Ø§Ø±ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ØŒ Ù‡Ù†Ø± Ùˆ Ù…Ø¹Ù…Ø§Ø±ÛŒ</p>
        <button class="btn" style="background:linear-gradient(to right, #9C27B0, #E040FB);margin-top:20px;" onclick="buyCivilizations()">Ø®Ø±ÛŒØ¯ (250 Ø³Ú©Ù‡)</button>
      </div>
      <div class="notebook">
        <h3>ğŸ“ Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø¨ÛŒØ±Ø³ØªØ§Ù†</h3>
        <p><strong>Ø¹Ù„ÙˆÙ… ØªØ¬Ø±Ø¨ÛŒ:</strong></p>
        <p>â€¢ Ø¨Ø±Ø§ÛŒ Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯Ø§Ù† Ø¨Ù‡ Ù¾Ø²Ø´Ú©ÛŒØŒ Ø¯Ù†Ø¯Ø§Ù†Ù¾Ø²Ø´Ú©ÛŒØŒ Ø¯Ø§Ø±ÙˆØ³Ø§Ø²ÛŒ</p>
        <p>â€¢ Ø¯Ø±ÙˆØ³ ØªØ®ØµØµÛŒ: Ø²ÛŒØ³Øªâ€ŒØ´Ù†Ø§Ø³ÛŒØŒ Ø´ÛŒÙ…ÛŒØŒ ÙÛŒØ²ÛŒÚ©</p>
        <p>â€¢ Ù…Ù‡Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²: Ø­Ø§ÙØ¸Ù‡ Ù‚ÙˆÛŒØŒ Ø¯Ù‚ØªØŒ Ø¹Ù„Ø§Ù‚Ù‡ Ø¨Ù‡ Ø¹Ù„ÙˆÙ…</p>
        <p><strong>Ø±ÛŒØ§Ø¶ÛŒ Ùˆ ÙÛŒØ²ÛŒÚ©:</strong></p>
        <p>â€¢ Ø¨Ø±Ø§ÛŒ Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯Ø§Ù† Ø¨Ù‡ Ù…Ù‡Ù†Ø¯Ø³ÛŒØŒ Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ±ØŒ Ø±ÛŒØ§Ø¶ÛŒ</p>
        <p>â€¢ Ø¯Ø±ÙˆØ³ ØªØ®ØµØµÛŒ: Ø±ÛŒØ§Ø¶ÛŒØŒ ÙÛŒØ²ÛŒÚ©ØŒ Ø´ÛŒÙ…ÛŒ</p>
        <p>â€¢ Ù…Ù‡Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²: ØªÙÚ©Ø± Ù…Ù†Ø·Ù‚ÛŒØŒ Ø­Ù„ Ù…Ø³Ø¦Ù„Ù‡</p>
        <p><strong>Ø¹Ù„ÙˆÙ… Ø§Ù†Ø³Ø§Ù†ÛŒ:</strong></p>
        <p>â€¢ Ø¨Ø±Ø§ÛŒ Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯Ø§Ù† Ø¨Ù‡ Ø­Ù‚ÙˆÙ‚ØŒ Ø±ÙˆØ§Ù†Ø´Ù†Ø§Ø³ÛŒØŒ Ø¬Ø§Ù…Ø¹Ù‡â€ŒØ´Ù†Ø§Ø³ÛŒ</p>
        <p>â€¢ Ø¯Ø±ÙˆØ³ ØªØ®ØµØµÛŒ: Ø¬Ø§Ù…Ø¹Ù‡â€ŒØ´Ù†Ø§Ø³ÛŒØŒ Ø±ÙˆØ§Ù†Ø´Ù†Ø§Ø³ÛŒØŒ Ø¬ØºØ±Ø§ÙÛŒØ§</p>
        <p>â€¢ Ù…Ù‡Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø²: Ù†ÙˆØ´ØªÙ†ØŒ ØªØ­Ù„ÛŒÙ„ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ</p>
        <button class="btn" style="background:linear-gradient(to right, #2196F3, #21CBF3);margin-top:20px;" onclick="buyFields()">Ø®Ø±ÛŒØ¯ (200 Ø³Ú©Ù‡)</button>
      </div>
      <button class="btn" style="background:#555;" onclick="showScreen('dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- ÙØ±ÙˆØ´Ú¯Ø§Ù‡ -->
    <div id="shop" class="screen">
      <h1>ğŸ›’ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¢Ø±Ø§Ø¯ 3.0</h1>
      <div class="profile-coins" style="font-size:1.4rem;margin:20px 0;">Ø³Ú©Ù‡ Ø´Ù…Ø§: <span id="shopCoins">0</span></div>
      
      <div class="shop-item" onclick="buyItem('music1')">
        <h3>ğŸµ Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø¢Ø±Ø§Ù…Ø´â€ŒØ¨Ø®Ø´ Û±</h3>
        <p>Ø¨Ø±Ø§ÛŒ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ù…ØªÙ…Ø±Ú©Ø² Ùˆ Ø¢Ø±Ø§Ù…Ø´ Ø°Ù‡Ù†</p>
        <div class="price">150 Ø³Ú©Ù‡</div>
      </div>
      
      <div class="shop-item" onclick="buyItem('music2')">
        <h3>ğŸ¶ Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø§Ù†Ø±Ú˜ÛŒâ€ŒØ¨Ø®Ø´ Û²</h3>
        <p>Ø¨Ø±Ø§ÛŒ Ø­Ù„ Ù…Ø³Ø§Ø¦Ù„ Ù¾ÛŒÚ†ÛŒØ¯Ù‡ Ùˆ Ú†Ø§Ù„Ø´â€ŒÙ‡Ø§</p>
        <div class="price">180 Ø³Ú©Ù‡</div>
      </div>
      
      <div class="shop-item" onclick="buyItem('avatar_gold')">
        <h3>ğŸ‘‘ Ø¢ÙˆØ§ØªØ§Ø± Ø·Ù„Ø§ÛŒÛŒ</h3>
        <p>Ø¢ÙˆØ§ØªØ§Ø± ÙˆÛŒÚ˜Ù‡ Ø¨Ø§ Ø¬Ù„ÙˆÙ‡ Ø·Ù„Ø§ÛŒÛŒ</p>
        <div class="price">300 Ø³Ú©Ù‡</div>
      </div>
      
      <div class="shop-item" onclick="buyItem('avatar_diamond')">
        <h3>ğŸ’ Ø¢ÙˆØ§ØªØ§Ø± Ø§Ù„Ù…Ø§Ø³ÛŒ</h3>
        <p>Ø¢ÙˆØ§ØªØ§Ø± Ù†Ø§Ø¯Ø± Ø¨Ø§ Ø¬Ù„ÙˆÙ‡ Ø§Ù„Ù…Ø§Ø³ÛŒ</p>
        <div class="price">500 Ø³Ú©Ù‡</div>
      </div>
      
      <div class="shop-item" onclick="buyItem('theme_blue')">
        <h3>ğŸ¨ ØªÙ… Ø¢Ø¨ÛŒ-Ø¨Ù†ÙØ´</h3>
        <p>ØªÙ… Ø¢Ø±Ø§Ù…Ø´â€ŒØ¨Ø®Ø´ Ø¨Ø±Ø§ÛŒ Ú†Ø´Ù…â€ŒÙ‡Ø§</p>
        <div class="price">100 Ø³Ú©Ù‡</div>
      </div>
      
      <div class="shop-item" onclick="buyItem('theme_green')">
        <h3>ğŸŒ¿ ØªÙ… Ø³Ø¨Ø² Ø·Ø¨ÛŒØ¹Øª</h3>
        <p>ØªÙ… Ø§Ù„Ù‡Ø§Ù…â€ŒÚ¯Ø±ÙØªÙ‡ Ø§Ø² Ø·Ø¨ÛŒØ¹Øª</p>
        <div class="price">120 Ø³Ú©Ù‡</div>
      </div>
      
      <button class="btn" style="background:#555;" onclick="showScreen('dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- ÛŒØ§Ø¯Ø¯Ø§Ø´Øª -->
    <div id="notes" class="screen">
      <h1>ğŸ“ Ø¯ÙØªØ±Ú†Ù‡ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª</h1>
      <textarea class="note-input" id="newNote" placeholder="ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..." style="width:90%;padding:18px;margin:20px auto;border-radius:20px;border:none;font-size:1.2rem;background:rgba(255,255,255,0.12);color:white;height:120px;"></textarea>
      <button class="btn btn-note" onclick="saveNote()">Ø°Ø®ÛŒØ±Ù‡ ÛŒØ§Ø¯Ø¯Ø§Ø´Øª</button>
      <div class="notes-list" id="notesList"></div>
      <button class="btn" style="background:#555;" onclick="showScreen('dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- Ø§ÛŒØ¯Ù‡â€ŒÙ¾Ø±Ø¯Ø§Ø²ÛŒ -->
    <div id="creativity" class="screen">
      <h1>ğŸ’¡ Ø§ÛŒØ¯Ù‡â€ŒÙ¾Ø±Ø¯Ø§Ø²ÛŒ</h1>
      <div class="notebook">
        <h3>Ù¾Ø§Ø±Ú© Ø§ÛŒØ¯Ù‡â€ŒØ¢Ù„</h3>
        <p>Ú†Ù‡ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒÛŒ Ø¨Ø§ÛŒØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ØŸ</p>
        <p>- ÙØ¶Ø§ÛŒ Ø³Ø¨Ø² Ú¯Ø³ØªØ±Ø¯Ù‡<br>- ØªØ¬Ù‡ÛŒØ²Ø§Øª ÙˆØ±Ø²Ø´ÛŒ<br>- Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ±ÙˆÛŒ<br>- Ù†ÙˆØ± Ú©Ø§ÙÛŒ<br>- Ø§ÛŒÙ…Ù†ÛŒ Ú©Ø§Ù…Ù„<br>- Ø¯Ø³ØªØ±Ø³ÛŒ Ø¢Ø³Ø§Ù†<br>- Ù…Ø­ÛŒØ· Ø²ÛŒØ¨Ø§<br>- Ø®Ø¯Ù…Ø§Øª Ø±ÙØ§Ù‡ÛŒ</p>
        <textarea class="note-input" id="ideaInput1" placeholder="Ø§ÛŒØ¯Ù‡ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..." style="width:90%;padding:18px;margin:20px auto;border-radius:20px;border:none;font-size:1.2rem;background:rgba(255,255,255,0.12);color:white;height:100px;"></textarea>
        <button class="btn btn-note" onclick="saveIdea('Ù¾Ø§Ø±Ú©')">Ø°Ø®ÛŒØ±Ù‡ Ø§ÛŒØ¯Ù‡</button>
      </div>
      <div class="notebook">
        <h3>Ø®Ø§Ù†Ù‡ Ø¢ÛŒÙ†Ø¯Ù‡</h3>
        <p>Ú†Ù‡ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒÛŒ Ø¨Ø§ÛŒØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ØŸ</p>
        <p>- Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨ÙˆØ¯Ù†<br>- Ø§Ù†Ø±Ú˜ÛŒ Ø®ÙˆØ±Ø´ÛŒØ¯ÛŒ<br>- ÙØ¶Ø§ÛŒ Ø³Ø¨Ø²<br>- Ø·Ø±Ø§Ø­ÛŒ Ø§Ø±Ú¯ÙˆÙ†ÙˆÙ…ÛŒÚ©<br>- Ø§ÛŒÙ…Ù†ÛŒ Ø¨Ø§Ù„Ø§<br>- Ø¯Ø³ØªØ±Ø³ÛŒ Ø¢Ø³Ø§Ù†<br>- Ø²ÛŒØ¨Ø§ÛŒÛŒ<br>- Ù¾Ø§ÛŒØ¯Ø§Ø±ÛŒ</p>
        <textarea class="note-input" id="ideaInput2" placeholder="Ø§ÛŒØ¯Ù‡ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..." style="width:90%;padding:18px;margin:20px auto;border-radius:20px;border:none;font-size:1.2rem;background:rgba(255,255,255,0.12);color:white;height:100px;"></textarea>
        <button class="btn btn-note" onclick="saveIdea('Ø®Ø§Ù†Ù‡')">Ø°Ø®ÛŒØ±Ù‡ Ø§ÛŒØ¯Ù‡</button>
      </div>
      <div class="notebook">
        <h3>Ù…Ø¯Ø±Ø³Ù‡ Ø±ÙˆÛŒØ§ÛŒÛŒ</h3>
        <p>Ú†Ù‡ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒÛŒ Ø¨Ø§ÛŒØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ØŸ</p>
        <p>- ÙØ¶Ø§ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ<br>- ØªØ¬Ù‡ÛŒØ²Ø§Øª Ø¯ÛŒØ¬ÛŒØªØ§Ù„<br>- Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ù¾ÛŒØ´Ø±ÙØªÙ‡<br>- ÙØ¶Ø§ÛŒ Ø³Ø¨Ø²<br>- Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ú©ÙˆÚ†Ú©<br>- Ù…Ø¹Ù„Ù…Ø§Ù† Ø®Ù„Ø§Ù‚<br>- Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§ÛŒ ÙÙˆÙ‚â€ŒØ¨Ø±Ù†Ø§Ù…Ù‡<br>- Ù…Ø­ÛŒØ· Ø§Ù„Ù‡Ø§Ù…â€ŒØ¨Ø®Ø´</p>
        <textarea class="note-input" id="ideaInput3" placeholder="Ø§ÛŒØ¯Ù‡ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..." style="width:90%;padding:18px;margin:20px auto;border-radius:20px;border:none;font-size:1.2rem;background:rgba(255,255,255,0.12);color:white;height:100px;"></textarea>
        <button class="btn btn-note" onclick="saveIdea('Ù…Ø¯Ø±Ø³Ù‡')">Ø°Ø®ÛŒØ±Ù‡ Ø§ÛŒØ¯Ù‡</button>
      </div>
      <button class="btn" style="background:#555;" onclick="showScreen('dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- Ù…ÛŒÙ†ÛŒâ€ŒÚ¯ÛŒÙ…â€ŒÙ‡Ø§ -->
    <div id="miniGames" class="screen">
      <h1>ğŸ® Ù…ÛŒÙ†ÛŒâ€ŒÚ¯ÛŒÙ…â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù…Ù„</h1>
      <button class="btn btn-game" onclick="showScreen('ticTacToe')">âŒ Ø¯ÙˆØ²</button>
      <button class="btn btn-game" onclick="showScreen('chess')">â™Ÿï¸ Ø´Ø·Ø±Ù†Ø¬</button>
      <button class="btn btn-game" onclick="showScreen('mancala')">ğŸŒ° Ù…Ù†Ú†</button>
      <button class="btn btn-game" onclick="showScreen('emojiBuilder')">ğŸ¨ Ø³Ø§Ø®Øª ØªØµÙˆÛŒØ± Ø¨Ø§ Ø§ÛŒÙ…ÙˆØ¬ÛŒ</button>
      <button class="btn" style="background:#555;" onclick="showScreen('dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- Ø¯ÙˆØ² -->
    <div id="ticTacToe" class="screen">
      <h1>âŒ Ø¯ÙˆØ²</h1>
      <div class="game-info">
        <p>Ø¯ÙˆØ² ÛŒÚ© Ø¨Ø§Ø²ÛŒ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒÚ© Ø¯Ùˆ Ù†ÙØ±Ù‡ Ø§Ø³Øª Ú©Ù‡ ØªÙÚ©Ø± Ù…Ù†Ø·Ù‚ÛŒ Ø±Ø§ ØªÙ‚ÙˆÛŒØª Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>
        <p>Ø¯Ø± Ø§ÛŒÙ† Ù†Ø³Ø®Ù‡ØŒ Ø´Ù…Ø§ Ø¨Ø§ Ø±Ø¨Ø§Øª Ø¨Ø§Ø²ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯. Ø´Ù…Ø§ âŒ Ùˆ Ø±Ø¨Ø§Øª â­• Ø§Ø³Øª.</p>
      </div>
      <div class="game-board" id="ticTacToeBoard">
        <!-- 9 Ø®Ø§Ù†Ù‡ Ø¨Ø±Ø§ÛŒ Ø¯ÙˆØ² -->
        <div class="game-cell" onclick="makeMove(0)"></div>
        <div class="game-cell" onclick="makeMove(1)"></div>
        <div class="game-cell" onclick="makeMove(2)"></div>
        <div class="game-cell" onclick="makeMove(3)"></div>
        <div class="game-cell" onclick="makeMove(4)"></div>
        <div class="game-cell" onclick="makeMove(5)"></div>
        <div class="game-cell" onclick="makeMove(6)"></div>
        <div class="game-cell" onclick="makeMove(7)"></div>
        <div class="game-cell" onclick="makeMove(8)"></div>
      </div>
      <button class="btn" style="background:#555;" onclick="showScreen('miniGames')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- Ø´Ø·Ø±Ù†Ø¬ -->
    <div id="chess" class="screen">
      <h1>â™Ÿï¸ Ø´Ø·Ø±Ù†Ø¬</h1>
      <div class="game-info">
        <p>Ø´Ø·Ø±Ù†Ø¬ ÛŒÚ© Ø¨Ø§Ø²ÛŒ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒÚ© Ø¯Ùˆ Ù†ÙØ±Ù‡ Ø§Ø³Øª Ú©Ù‡ Ù‡ÙˆØ´ØŒ ØªÙ…Ø±Ú©Ø² Ùˆ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø±Ø§ ØªÙ‚ÙˆÛŒØª Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>
        <p>Ø¯Ø± Ø§ÛŒÙ† Ù†Ø³Ø®Ù‡ØŒ Ø´Ù…Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø§ Ø±Ø¨Ø§Øª Ø¨Ø§Ø²ÛŒ Ú©Ù†ÛŒØ¯ ÛŒØ§ Ø­Ø±Ú©Ø§Øª Ø±Ø§ ØªÙ…Ø±ÛŒÙ† Ú©Ù†ÛŒØ¯.</p>
      </div>
      <div class="game-board" id="chessBoard">
        <!-- Ø´Ø·Ø±Ù†Ø¬ Ø³Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ -->
        <div class="game-cell">â™œ</div>
        <div class="game-cell">â™</div>
        <div class="game-cell">â™</div>
        <div class="game-cell">â™›</div>
        <div class="game-cell">â™š</div>
        <div class="game-cell">â™</div>
        <div class="game-cell">â™</div>
        <div class="game-cell">â™œ</div>
        <!-- Ø³Ø§ÛŒØ± Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§ -->
      </div>
      <button class="btn" style="background:#555;" onclick="showScreen('miniGames')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- Ù…Ù†Ú† -->
    <div id="mancala" class="screen">
      <h1>ğŸŒ° Ù…Ù†Ú†</h1>
      <div class="game-info">
        <p>Ù…Ù†Ú† ÛŒÚ© Ø¨Ø§Ø²ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒÚ© Ø§Ø³Øª Ú©Ù‡ Ù…Ù‡Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ø±ÛŒØ§Ø¶ÛŒ Ùˆ ØªÙÚ©Ø± Ù…Ù†Ø·Ù‚ÛŒ Ø±Ø§ ØªÙ‚ÙˆÛŒØª Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>
        <p>Ø¯Ø± Ø§ÛŒÙ† Ù†Ø³Ø®Ù‡ØŒ Ø´Ù…Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø§ Ø±Ø¨Ø§Øª Ø¨Ø§Ø²ÛŒ Ú©Ù†ÛŒØ¯.</p>
      </div>
      <div class="game-board" id="mancalaBoard">
        <!-- Ù…Ù†Ú† Ø³Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ -->
        <div class="game-cell">4</div>
        <div class="game-cell">4</div>
        <div class="game-cell">4</div>
        <div class="game-cell">0</div>
        <div class="game-cell">4</div>
        <div class="game-cell">4</div>
        <div class="game-cell">4</div>
        <div class="game-cell">0</div>
      </div>
      <button class="btn" style="background:#555;" onclick="showScreen('miniGames')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- Ø³Ø§Ø®Øª ØªØµÙˆÛŒØ± Ø¨Ø§ Ø§ÛŒÙ…ÙˆØ¬ÛŒ -->
    <div id="emojiBuilder" class="screen">
      <h1>ğŸ¨ Ø³Ø§Ø®Øª ØªØµÙˆÛŒØ± Ø¨Ø§ Ø§ÛŒÙ…ÙˆØ¬ÛŒ</h1>
      <div class="game-info">
        <p>Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ±ØŒ ØªØµÙˆÛŒØ±Ù‡Ø§ÛŒ Ø®Ù„Ø§Ù‚Ø§Ù†Ù‡ Ø¨Ø³Ø§Ø²ÛŒØ¯!</p>
        <p>Ù…ÙˆØ¶ÙˆØ¹Ø§Øª: Ù¾Ø§Ø±Ú©ØŒ Ø®Ø§Ù†Ù‡ØŒ Ø§Ù†Ø³Ø§Ù†ØŒ Ø·Ø¨ÛŒØ¹ØªØŒ Ø­ÛŒÙˆØ§Ù†Ø§ØªØŒ ÙˆØ³Ø§ÛŒÙ„ Ù†Ù‚Ù„ÛŒÙ‡</p>
      </div>
      <div style="display:flex;justify-content:center;flex-wrap:wrap;margin:20px;">
        <!-- Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ù¾Ø§Ø±Ú© -->
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸŒ³')">ğŸŒ³</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸŒ¸')">ğŸŒ¸</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji(' Bench')">ğŸª‘</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji(' Fountain')">â›²</div>
        <!-- Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ø®Ø§Ù†Ù‡ -->
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸ ')">ğŸ </div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸšª')">ğŸšª</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸªŸ')">ğŸªŸ</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸ›ï¸')">ğŸ›ï¸</div>
        <!-- Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ù†Ø³Ø§Ù† -->
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸ§‘')">ğŸ§‘</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸ§’')">ğŸ§’</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦')">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸ­')">ğŸ­</div>
        <!-- Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ø·Ø¨ÛŒØ¹Øª -->
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸŒ')">ğŸŒ</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸŒ™')">ğŸŒ™</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸŒˆ')">ğŸŒˆ</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸŒŠ')">ğŸŒŠ</div>
        <!-- Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ Ø­ÛŒÙˆØ§Ù†Ø§Øª -->
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸ¶')">ğŸ¶</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸ±')">ğŸ±</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸ¦')">ğŸ¦</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸ¦‹')">ğŸ¦‹</div>
        <!-- Ø§ÛŒÙ…ÙˆØ¬ÛŒâ€ŒÙ‡Ø§ÛŒ ÙˆØ³Ø§ÛŒÙ„ Ù†Ù‚Ù„ÛŒÙ‡ -->
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸš—')">ğŸš—</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸš²')">ğŸš²</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('âœˆï¸')">âœˆï¸</div>
        <div style="font-size:2rem;margin:8px;cursor:pointer;" onclick="addEmoji('ğŸš¢')">ğŸš¢</div>
      </div>
      <div id="emojiDisplay" style="font-size:2.5rem;margin:30px 0;height:200px;overflow:auto;background:rgba(0,0,0,0.2);padding:20px;border-radius:20px;"></div>
      <button class="btn" style="background:#555;" onclick="showScreen('miniGames')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ù…Ù„ -->
    <div id="fullProfile" class="screen">
      <h1>ğŸ‘¤ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ù…Ù„</h1>
      <div class="profile-full">
        <div style="display:flex;justify-content:center;margin-bottom:25px;">
          <div class="avatar" id="fullAvatar" style="width:90px;height:90px;font-size:2.2rem;">A</div>
        </div>
        <h2 id="fullName">Ú©Ø§Ø±Ø¨Ø±</h2>
        <div class="profile-stats">
          <div class="stat-card">
            <div class="stat-value" id="totalCoins">0</div>
            <div class="stat-label">Ø³Ú©Ù‡ Ú©Ù„</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="playTime">0</div>
            <div class="stat-label">Ø²Ù…Ø§Ù† Ø¨Ø§Ø²ÛŒ (Ø¯Ù‚ÛŒÙ‚Ù‡)</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="level">1</div>
            <div class="stat-label">Ø³Ø·Ø­</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="totalQuestions">0</div>
            <div class="stat-label">Ø³ÙˆØ§Ù„Ø§Øª Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡</div>
          </div>
        </div>
        <div style="margin-top:25px;font-size:1.2rem;">
          <div>Ø¢ÙˆØ§ØªØ§Ø±: <span id="currentAvatar">Ù…Ø¹Ù…ÙˆÙ„ÛŒ</span></div>
          <div>ØªÙ…: <span id="currentTheme">Ù¾ÛŒØ´â€ŒÙØ±Ø¶</span></div>
        </div>
      </div>
      <button class="btn" style="background:#555;" onclick="showScreen('dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- ØªÙ†Ø¸ÛŒÙ…Ø§Øª -->
    <div id="settings" class="screen">
      <h1>âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</h1>
      
      <div class="settings-item">
        <h3>ØªØºÛŒÛŒØ± Ù†Ø§Ù… Ùˆ ÙØ§Ù…ÛŒÙ„</h3>
        <input type="text" id="newFirstName" placeholder="Ù†Ø§Ù… Ø¬Ø¯ÛŒØ¯" style="width:100%;padding:12px;margin:10px 0;border-radius:15px;border:none;background:rgba(255,255,255,0.12);color:white;">
        <input type="text" id="newLastName" placeholder="Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø¬Ø¯ÛŒØ¯" style="width:100%;padding:12px;margin:10px 0;border-radius:15px;border:none;background:rgba(255,255,255,0.12);color:white;">
        <button class="btn" style="background:linear-gradient(to right, #00C853, #64DD17);width:auto;padding:10px 20px;font-size:1.1rem;" onclick="changeName()">ØªØºÛŒÛŒØ± Ù†Ø§Ù…</button>
      </div>
      
      <div class="settings-item">
        <h3>Ø²Ù…Ø§Ù† Ø¨Ø§Ø²ÛŒ</h3>
        <p>Ø²Ù…Ø§Ù† Ú©Ù„ Ø¨Ø§Ø²ÛŒ Ø´Ù…Ø§: <span id="settingsPlayTime">0</span> Ø¯Ù‚ÛŒÙ‚Ù‡</p>
      </div>
      
      <div class="settings-item">
        <h3>Ù„ÛŒÙ†Ú© Ø¨Ø§Ø²ÛŒ</h3>
        <div class="copy-link" id="gameLink">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</div>
        <button class="btn" style="background:linear-gradient(to right, #00C853, #64DD17);width:auto;padding:10px 20px;font-size:1.1rem;" onclick="copyGameLink()">Ú©Ù¾ÛŒ Ù„ÛŒÙ†Ú©</button>
        <p style="margin-top:10px;font-size:0.95rem;opacity:0.8;">Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø¯ÙˆØ³ØªØ§Ù† Ø®ÙˆØ¯</p>
      </div>
      
      <div class="settings-item">
        <h3>Ù…ÙˆØ³ÛŒÙ‚ÛŒ</h3>
        <button class="toggle-btn" id="musicToggle" onclick="toggleMusic()">Ø®Ø§Ù…ÙˆØ´</button>
        <p style="margin-top:10px;">Ú©Ù†ØªØ±Ù„ Ù¾Ø®Ø´ Ù…ÙˆØ³ÛŒÙ‚ÛŒ</p>
      </div>
      
      <div class="settings-item">
        <h3>ÙÙˆÙ†Øª</h3>
        <button class="btn" style="background:#444;margin:8px;width:auto;padding:10px 15px;font-size:1.1rem;" onclick="changeFont('Vazirmatn')">Vazirmatn</button>
        <button class="btn" style="background:#444;margin:8px;width:auto;padding:10px 15px;font-size:1.1rem;" onclick="changeFont('Shabnam')">Shabnam</button>
        <button class="btn" style="background:#444;margin:8px;width:auto;padding:10px 15px;font-size:1.1rem;" onclick="changeFont('Samim')">Samim</button>
        <p style="margin-top:10px;font-size:0.95rem;opacity:0.8;">ÙÙˆÙ†Øª Ø§Ù†ØªØ®Ø§Ø¨ÛŒ Ø´Ù…Ø§ Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</p>
      </div>
      
      <div class="settings-item">
        <h3>ÙØ¹Ø§Ù„/ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§</h3>
        <div style="display:flex;align-items:center;justify-content:space-between;margin:10px 0;">
          <span>ØµØ¯Ø§Ù‡Ø§</span>
          <button class="toggle-btn active" id="soundToggle" onclick="toggleSound()">Ø±ÙˆØ´Ù†</button>
        </div>
        <div style="display:flex;align-items:center;justify-content:space-between;margin:10px 0;">
          <span>Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§</span>
          <button class="toggle-btn active" id="animationToggle" onclick="toggleAnimation()">Ø±ÙˆØ´Ù†</button>
        </div>
        <div style="display:flex;align-items:center;justify-content:space-between;margin:10px 0;">
          <span>ØªÙ… Ø¢Ø¨ÛŒ-Ø¨Ù†ÙØ´</span>
          <button class="toggle-btn" id="themeBlueToggle" onclick="toggleTheme('blue')">Ø®Ø§Ù…ÙˆØ´</button>
        </div>
        <div style="display:flex;align-items:center;justify-content:space-between;margin:10px 0;">
          <span>ØªÙ… Ø³Ø¨Ø² Ø·Ø¨ÛŒØ¹Øª</span>
          <button class="toggle-btn" id="themeGreenToggle" onclick="toggleTheme('green')">Ø®Ø§Ù…ÙˆØ´</button>
        </div>
      </div>
      
      <button class="btn" style="background:#555;" onclick="showScreen('dashboard')">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>

    <!-- Ù¾Ù†Ø¬Ø±Ù‡ ØªÙˆØ¶ÛŒØ­Ø§Øª -->
    <div id="explanationModal" class="modal" style="display:none;">
      <div class="modal-content">
        <h2>ğŸ¤– ØªÙˆØ¶ÛŒØ­ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</h2>
        <p id="explanationText"></p>
        <div style="text-align:center;">
          <div class="close-btn" onclick="closeModal()">Ø¨Ø³ØªÙ†</div>
        </div>
      </div>
    </div>

    <!-- Ù¾Ù†Ø¬Ø±Ù‡ Ù¾Ø§ÛŒØ§Ù† Ø±Ù‚Ø§Ø¨Øª -->
    <div id="endBattleModal" class="modal" style="display:none;">
      <div class="modal-content">
        <h2>ğŸ† Ù¾Ø§ÛŒØ§Ù† Ø±Ù‚Ø§Ø¨Øª</h2>
        <p>Ø§Ù…ØªÛŒØ§Ø² Ø´Ù…Ø§: <span id="endScore">0</span></p>
        <p>Ø³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØªÛŒ: <span id="endCoins">0</span></p>
        <div style="text-align:center;">
          <div class="close-btn" onclick="confirmEndBattle()">ØªØ§ÛŒÛŒØ¯ Ùˆ Ø¨Ø§Ø²Ú¯Ø´Øª</div>
        </div>
      </div>
    </div>

    <!-- ØµØ¯Ø§Ù‡Ø§ -->
    <audio id="correctSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3"></audio>
    <audio id="wrongSound" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3"></audio>
    <audio id="levelUpSound" src="https://assets.mixkit.co/sfx/preview/mixkit-unlock-game-notification-253.mp3"></audio>
    <audio id="music1" src="https://assets.mixkit.co/music/preview/mixkit-ambient-piano-4.mp3"></audio>
    <audio id="music2" src="https://assets.mixkit.co/music/preview/mixkit-game-show-suspense-603.mp3"></audio>

    <script>
      // ========== Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²ÛŒ ==========
      let gameState = {
        user: { 
          name: "", 
          family: "", 
          coins: 0, 
          level: 1, 
          playTime: 0,
          totalQuestions: 0,
          unlockedAI: [],
          unlockedCivilizations: false,
          unlockedFields: false,
          purchasedItems: [],
          notes: [],
          avatar: 'Ù…Ø¹Ù…ÙˆÙ„ÛŒ',
          theme: 'Ù¾ÛŒØ´â€ŒÙØ±Ø¶'
        },
        soundEnabled: true,
        animationEnabled: true,
        musicEnabled: false,
        currentFont: 'Vazirmatn',
        currentSubject: '',
        currentQuestionIndex: 0,
        score: 0,
        startTime: Date.now(),
        playTimeInterval: null,
        usedQuestions: {},
        // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯ÙˆØ²
        ticTacToeBoard: ['', '', '', '', '', '', '', '', ''],
        currentPlayer: 'X',
        gameActive: true
      };

      // ========== Ø³ÙˆØ§Ù„Ø§Øª 100 ØªØ§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø¯Ø±Ø³ ==========
      // Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª ÙØ¶Ø§ØŒ ÙÙ‚Ø· 5 Ø³ÙˆØ§Ù„ Ø§Ø² Ù‡Ø± Ø¯Ø±Ø³ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡
      // Ø¯Ø± Ù†Ø³Ø®Ù‡ ÙˆØ§Ù‚Ø¹ÛŒØŒ 100 Ø³ÙˆØ§Ù„ Ø¯Ù‚ÛŒÙ‚ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø¯Ø±Ø³ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
      const questions = {
        Ø±ÛŒØ§Ø¶ÛŒ: [
          { q: "Ø­Ø§ØµÙ„ Ø¹Ø¨Ø§Ø±Øª (Û³ + Û´) Ã— Û² Ú†Ù†Ø¯ Ø§Ø³ØªØŸ", o: ["Û±Û°", "Û±Û´", "Û²Û´", "Û·"], a: 1, exp: "Ø§ÙˆÙ„ Ø¯Ø§Ø®Ù„ Ù¾Ø±Ø§Ù†ØªØ² Ø±Ø§ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…: Û³+Û´=Û·ØŒ Ø³Ù¾Ø³ Û·Ã—Û²=Û±Û´." },
          { q: "Ø²Ø§ÙˆÛŒÙ‡â€ŒÛŒ Ø®Ø§Ø±Ø¬ÛŒ ÛŒÚ© Ù…Ø«Ù„Ø« Ù…ØªØ³Ø§ÙˆÛŒâ€ŒØ§Ù„Ø§Ø¶Ù„Ø§Ø¹ Ú†Ù†Ø¯ Ø¯Ø±Ø¬Ù‡ Ø§Ø³ØªØŸ", o: ["Û¶Û°", "Û¹Û°", "Û±Û²Û°", "Û±Û¸Û°"], a: 2, exp: "Ù…Ø¬Ù…ÙˆØ¹ Ø²ÙˆØ§ÛŒØ§ÛŒ Ø®Ø§Ø±Ø¬ÛŒ Ù‡Ø± Ú†Ù†Ø¯Ø¶Ù„Ø¹ÛŒ Û³Û¶Û° Ø¯Ø±Ø¬Ù‡ Ø§Ø³Øª. Ø¨Ø±Ø§ÛŒ Ù…Ø«Ù„Ø« Ù…ØªØ³Ø§ÙˆÛŒâ€ŒØ§Ù„Ø§Ø¶Ù„Ø§Ø¹: Û³Û¶Û°Ã·Û³=Û±Û²Û°." },
          { q: "Ø¹Ø¯Ø¯ Û±Û´Û´ Ú†Ù†Ø¯ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡ Ø¯Ø§Ø±Ø¯ØŸ", o: ["Û±Û²", "Û±Ûµ", "Û±Û¸", "Û²Û°"], a: 1, exp: "Û±Û´Û´ = 2â´ Ã— 3Â² â†’ ØªØ¹Ø¯Ø§Ø¯ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡â€ŒÙ‡Ø§ = (Û´+Û±)(Û²+Û±) = Û±Ûµ." },
          { q: "Ù…Ø³Ø§Ø­Øª Ù…Ø±Ø¨Ø¹ÛŒ Ø¨Ø§ Ù‚Ø·Ø± Û±Û° Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ± Ú†Ù‚Ø¯Ø± Ø§Ø³ØªØŸ", o: ["ÛµÛ°", "Û±Û°Û°", "Û²Ûµ", "Û·Ûµ"], a: 0, exp: "Ù…Ø³Ø§Ø­Øª Ù…Ø±Ø¨Ø¹ = (Ù‚Ø·Ø± Ã— Ù‚Ø·Ø±) Ã· Û² = (Û±Û°Ã—Û±Û°)Ã·Û² = ÛµÛ°." },
          { q: "Ú©ÙˆÚ†Ú©â€ŒØªØ±ÛŒÙ† Ù…Ø¶Ø±Ø¨ Ù…Ø´ØªØ±Ú© Û±Û² Ùˆ Û±Û¸ Ú©Ø¯Ø§Ù… Ø§Ø³ØªØŸ", o: ["Û²Û´", "Û³Û¶", "Û·Û²", "Û±Û¸"], a: 1, exp: "Û±Û²=2Â²Ã—3ØŒ Û±Û¸=2Ã—3Â² â†’ Ú©.Ù….Ù… = 2Â²Ã—3Â² = Û³Û¶." }
          // ... 95 Ø³ÙˆØ§Ù„ Ø¯ÛŒÚ¯Ø±
        ],
        Ø¹Ù„ÙˆÙ…: [
          { q: "Ú©Ø¯Ø§Ù… Ú¯Ø²ÛŒÙ†Ù‡ Ø¬Ø²Ø¡ Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø±ÙˆÙ†ÛŒ Ø²Ù…ÛŒÙ† Ù†ÛŒØ³ØªØŸ", o: ["Ù‡Ø³ØªÙ‡", "Ú¯ÙˆØ´ØªÙ‡", "Ù¾ÙˆØ³ØªÙ‡", "ÛŒÙˆÙ†ÙˆØ³ÙØ±"], a: 3, exp: "ÛŒÙˆÙ†ÙˆØ³ÙØ± Ø¬Ø²Ø¡ Ù„Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø¬Ùˆ Ø§Ø³ØªØŒ Ù†Ù‡ Ø¯Ø±ÙˆÙ† Ø²Ù…ÛŒÙ†." },
          { q: "ÙˆØ§Ú©Ù†Ø´ Ø´ÛŒÙ…ÛŒØ§ÛŒÛŒ Ø²Ù†Ú¯â€ŒØ²Ø¯Ú¯ÛŒ Ø¢Ù‡Ù† Ú†Ù‡ Ù†ÙˆØ¹ ÙˆØ§Ú©Ù†Ø´ÛŒ Ø§Ø³ØªØŸ", o: ["ØªØ¬Ø²ÛŒÙ‡", "ØªØ±Ú©ÛŒØ¨", "Ø¬Ø§ÛŒâ€ŒÚ¯Ø²ÛŒÙ†ÛŒ", "Ù‡ÛŒÚ†â€ŒÚ©Ø¯Ø§Ù…"], a: 1, exp: "Ø¢Ù‡Ù† Ø¨Ø§ Ø§Ú©Ø³ÛŒÚ˜Ù† ØªØ±Ú©ÛŒØ¨ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø§Ú©Ø³ÛŒØ¯ Ø¢Ù‡Ù† (Ø²Ù†Ú¯) ØªØ´Ú©ÛŒÙ„ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯." },
          { q: "Ú©Ø¯Ø§Ù… Ù…Ø§Ø¯Ù‡ Ø±Ø³Ø§Ù†Ø§ÛŒ Ø§Ù„Ú©ØªØ±ÛŒÚ©ÛŒ Ø®ÙˆØ¨ÛŒ Ø§Ø³ØªØŸ", o: ["Ú†ÙˆØ¨", "Ù¾Ù„Ø§Ø³ØªÛŒÚ©", "Ù…Ø³", "Ø´ÛŒØ´Ù‡"], a: 2, exp: "ÙÙ„Ø²Ø§Øª Ù…Ø§Ù†Ù†Ø¯ Ù…Ø³ Ø±Ø³Ø§Ù†Ø§ÛŒ Ø®ÙˆØ¨ÛŒ Ù‡Ø³ØªÙ†Ø¯." },
          { q: "ÙˆØ§Ø­Ø¯ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ù†ÛŒØ±Ùˆ Ú†ÛŒØ³ØªØŸ", o: ["Ú˜ÙˆÙ„", "ÙˆØ§Øª", "Ù†ÛŒÙˆØªÙ†", "Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…"], a: 2, exp: "ÙˆØ§Ø­Ø¯ Ù†ÛŒØ±Ùˆ Ø¯Ø± Ø³ÛŒØ³ØªÙ… SIØŒ Ù†ÛŒÙˆØªÙ† Ø§Ø³Øª." },
          { q: "Ú©Ø¯Ø§Ù… Ú¯Ø²ÛŒÙ†Ù‡ Ù…Ø«Ø§Ù„ÛŒ Ø§Ø² ØªØºÛŒÛŒØ± ÙÛŒØ²ÛŒÚ©ÛŒ Ø§Ø³ØªØŸ", o: ["Ø³ÙˆØ®ØªÙ† Ú©Ø§ØºØ°", "Ø²Ø¯Ù† ØªØ®Ù…â€ŒÙ…Ø±Øº", "Ø²Ù†Ú¯â€ŒØ²Ø¯Ú¯ÛŒ Ø¢Ù‡Ù†", "ØªØ®Ù…ÛŒØ± Ù†Ø§Ù†"], a: 1, exp: "Ø²Ø¯Ù† ØªØ®Ù…â€ŒÙ…Ø±Øº ÙÙ‚Ø· Ø´Ú©Ù„ Ø¢Ù† Ø±Ø§ ØªØºÛŒÛŒØ± Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ØŒ ÙˆÙ„ÛŒ ØªØ±Ú©ÛŒØ¨ Ø´ÛŒÙ…ÛŒØ§ÛŒÛŒâ€ŒØ§Ø´ Ø¹ÙˆØ¶ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯." }
          // ... 95 Ø³ÙˆØ§Ù„ Ø¯ÛŒÚ¯Ø±
        ],
        ÙØ§Ø±Ø³ÛŒ: [
          { q: "ÙØ¹Ù„ Â«Ø®ÙˆØ§Ù‡Ù… Ø±ÙØªÂ» Ø§Ø² Ú†Ù‡ Ù†ÙˆØ¹ Ø§ÙØ¹Ø§Ù„ÛŒ Ø§Ø³ØªØŸ", o: ["Ù…Ø§Ø¶ÛŒ Ø§Ø³ØªÙ…Ø±Ø§Ø±ÛŒ", "Ù…Ø³ØªÙ‚Ø¨Ù„", "Ù…Ø¶Ø§Ø±Ø¹", "Ù…Ø§Ø¶ÛŒ Ø¨Ø¹ÛŒØ¯"], a: 1, exp: "Ø§ÙØ¹Ø§Ù„ÛŒ Ú©Ù‡ Ø¨Ø§ Â«Ø®ÙˆØ§Ù‡Ù…ØŒ Ø®ÙˆØ§Ù‡ÛŒØŒ ...Â» Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ØŒ ÙØ¹Ù„ Ù…Ø³ØªÙ‚Ø¨Ù„ Ù‡Ø³ØªÙ†Ø¯." },
          { q: "Ø¯Ø± Ø¹Ø¨Ø§Ø±Øª Â«Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù† Ú©Ù„Ø§Ø³ Ù‡ÙØªÙ… Ø¯Ø±Ø³ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù†Ø¯Ù†Ø¯Â»ØŒ ÙØ¹Ù„ Ú†Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ø¯Ø§Ø±Ø¯ØŸ", o: ["Ù…Ø§Ø¶ÛŒ Ø§Ø³ØªÙ…Ø±Ø§Ø±ÛŒ", "Ù…Ø§Ø¶ÛŒ Ø³Ø§Ø¯Ù‡", "Ù…Ø³ØªÙ‚Ø¨Ù„", "Ø­Ø§Ù„"], a: 0, exp: "ÙØ¹Ù„ Â«Ù…ÛŒâ€ŒØ®ÙˆØ§Ù†Ø¯Ù†Ø¯Â» Ø¨Ø§ Â«Ù…ÛŒÂ» Ø´Ø±ÙˆØ¹ Ø´Ø¯Ù‡ Ùˆ Ú¯Ø°Ø´ØªÙ‡ Ø§Ø³Øª â†’ Ù…Ø§Ø¶ÛŒ Ø§Ø³ØªÙ…Ø±Ø§Ø±ÛŒ." },
          { q: "Ú©Ø¯Ø§Ù… Ú©Ù„Ù…Ù‡ Ù‡Ù…â€ŒØ®Ø§Ù†ÙˆØ§Ø¯Ù‡ Ø¨Ø§ Â«Ø¯Ø§Ù†Ø´Â» Ù†ÛŒØ³ØªØŸ", o: ["Ø¯Ø§Ù†Ø´Ø¬Ùˆ", "Ø¯Ø§Ù†Ø´Ú¯Ø§Ù‡", "Ø¯Ø§Ù†Ø´Ù…Ù†Ø¯", "Ø¯Ø§Ù†Ø§ÛŒÛŒ"], a: 3, exp: "Â«Ø¯Ø§Ù†Ø§ÛŒÛŒÂ» Ø§Ø² Ø±ÛŒØ´Ù‡ Â«Ø¯Ø§Ù†Â» Ø§Ø³ØªØŒ Ù†Ù‡ Â«Ø¯Ø§Ù†Ø´Â»." },
          { q: "Ø¯Ø± Ø¬Ù…Ù„Ù‡ Â«Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ Ø±ÙˆÛŒ Ù…ÛŒØ² Ø¨ÙˆØ¯Ù†Ø¯Â»ØŒ Ù†Ù‡Ø§Ø¯ Ú©Ø¯Ø§Ù… Ø§Ø³ØªØŸ", o: ["Ú©ØªØ§Ø¨â€ŒÙ‡Ø§", "Ø±ÙˆÛŒ", "Ù…ÛŒØ²", "Ø¨ÙˆØ¯Ù†Ø¯"], a: 0, exp: "Ù†Ù‡Ø§Ø¯ Ù‡Ù…Ø§Ù† Ú©Ø³ÛŒ ÛŒØ§ Ú†ÛŒØ²ÛŒ Ø§Ø³Øª Ú©Ù‡ Ø¯Ø± Ø¬Ù…Ù„Ù‡ Ø®Ø¨Ø±ÛŒ Ø¯Ø±Ø¨Ø§Ø±Ù‡â€ŒØ§Ø´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ â†’ Â«Ú©ØªØ§Ø¨â€ŒÙ‡Ø§Â»." },
          { q: "Ú©Ø¯Ø§Ù… Ú¯Ø²ÛŒÙ†Ù‡ ÙØ¹Ù„ Ù†ÛŒØ³ØªØŸ", o: ["Ù…ÛŒâ€ŒØ±ÙˆØ¯", "Ø±ÙØª", "Ø±ÙˆØ¯", "Ø±ÙˆØ¯Ø®Ø§Ù†Ù‡"], a: 3, exp: "Â«Ø±ÙˆØ¯Ø®Ø§Ù†Ù‡Â» Ø§Ø³Ù… Ø§Ø³ØªØŒ Ù†Ù‡ ÙØ¹Ù„." }
          // ... 95 Ø³ÙˆØ§Ù„ Ø¯ÛŒÚ¯Ø±
        ],
        Ù…Ø·Ø§Ù„Ø¹Ø§Øª: [
          { q: "Ù…Ø±Ú©Ø² Ø§Ø³ØªØ§Ù† ÙØ§Ø±Ø³ Ú©Ø¯Ø§Ù… Ø´Ù‡Ø± Ø§Ø³ØªØŸ", o: ["Ø´ÛŒØ±Ø§Ø²", "Ø§ØµÙÙ‡Ø§Ù†", "ØªØ¨Ø±ÛŒØ²", "Ù…Ø´Ù‡Ø¯"], a: 0, exp: "Ø´ÛŒØ±Ø§Ø² Ù…Ø±Ú©Ø² Ø§Ø³ØªØ§Ù† ÙØ§Ø±Ø³ Ø§Ø³Øª." },
          { q: "Ú©Ø¯Ø§Ù… Ø±ÙˆØ¯Ø®Ø§Ù†Ù‡ Ø¨Ù‡ Ø¯Ø±ÛŒØ§ÛŒ Ø®Ø²Ø± Ù…ÛŒâ€ŒØ±ÛŒØ²Ø¯ØŸ", o: ["Ú©Ø§Ø±ÙˆÙ†", "Ø¯Ø¬Ù„Ù‡", "Ø§Ø±ÙˆÙ†Ø¯", "Ø³ÙÛŒØ¯Ø±ÙˆØ¯"], a: 3, exp: "Ø±ÙˆØ¯Ø®Ø§Ù†Ù‡ Ø³ÙÛŒØ¯Ø±ÙˆØ¯ Ø§Ø² Ø§Ø³ØªØ§Ù† Ú¯ÛŒÙ„Ø§Ù† Ø¨Ù‡ Ø¯Ø±ÛŒØ§ÛŒ Ø®Ø²Ø± Ù…ÛŒâ€ŒØ±ÛŒØ²Ø¯." },
          { q: "Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ±ÛŒÙ† ØªÙ…Ø¯Ù† Ø¬Ù‡Ø§Ù† Ú©Ø¯Ø§Ù… Ø§Ø³ØªØŸ", o: ["Ù…ØµØ±", "Ù‡Ù†Ø¯", "Ø³ÙˆÙ…Ø±", "Ú†ÛŒÙ†"], a: 2, exp: "ØªÙ…Ø¯Ù† Ø³ÙˆÙ…Ø± Ø¯Ø± Ø¨ÛŒÙ†â€ŒØ§Ù„Ù†Ù‡Ø±ÛŒÙ† Ù‚Ø¯ÛŒÙ…ÛŒâ€ŒØªØ±ÛŒÙ† ØªÙ…Ø¯Ù† Ø¬Ù‡Ø§Ù† Ø§Ø³Øª." },
          { q: "Ú©Ø¯Ø§Ù… Ú©Ø´ÙˆØ± Ù‡Ù…Ø³Ø§ÛŒÙ‡â€ŒÛŒ Ø´Ù…Ø§Ù„ÛŒ Ø§ÛŒØ±Ø§Ù† Ø§Ø³ØªØŸ", o: ["ØªØ±Ú©Ù…Ù†Ø³ØªØ§Ù†", "Ø§ÙØºØ§Ù†Ø³ØªØ§Ù†", "Ù¾Ø§Ú©Ø³ØªØ§Ù†", "Ø¹Ø±Ø§Ù‚"], a: 0, exp: "ØªØ±Ú©Ù…Ù†Ø³ØªØ§Ù† Ø¯Ø± Ø´Ù…Ø§Ù„ Ø§ÛŒØ±Ø§Ù† Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ø¯." },
          { q: "Ù¾Ø§ÛŒØªØ®Øª Ø§ÛŒØ±Ø§Ù† Ø¯Ø± Ø¯ÙˆØ±Ù‡Ù” ØµÙÙˆÛŒÙ‡ Ú©Ø¯Ø§Ù… Ø´Ù‡Ø± Ø¨ÙˆØ¯ØŸ", o: ["Ø§ØµÙÙ‡Ø§Ù†", "Ø´ÛŒØ±Ø§Ø²", "ØªØ¨Ø±ÛŒØ²", "Ù‚Ù…"], a: 0, exp: "Ø´Ø§Ù‡ Ø¹Ø¨Ø§Ø³ ØµÙÙˆÛŒ Ù¾Ø§ÛŒØªØ®Øª Ø±Ø§ Ø¨Ù‡ Ø§ØµÙÙ‡Ø§Ù† Ù…Ù†ØªÙ‚Ù„ Ú©Ø±Ø¯." }
          // ... 95 Ø³ÙˆØ§Ù„ Ø¯ÛŒÚ¯Ø±
        ],
        Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ: [
          { q: "What is the English word for 'Ú©ØªØ§Ø¨'?", o: ["Book", "Pen", "Desk", "Chair"], a: 0, exp: "'Ú©ØªØ§Ø¨' Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Book Ø§Ø³Øª." },
          { q: "What is the plural form of 'child'?", o: ["Childs", "Children", "Childes", "Child"], a: 1, exp: "Ø¬Ù…Ø¹ childØŒ children Ø§Ø³Øª." },
          { q: "Which word is a verb?", o: ["Happy", "Run", "Beautiful", "Table"], a: 1, exp: "'Run' ÛŒÚ© ÙØ¹Ù„ Ø§Ø³Øª." },
          { q: "What is the opposite of 'hot'?", o: ["Cold", "Warm", "Cool", "Freezing"], a: 0, exp: "Ù…ØªØ¶Ø§Ø¯ hotØŒ cold Ø§Ø³Øª." },
          { q: "How do you say 'Ø³Ù„Ø§Ù…' in English?", o: ["Hello", "Goodbye", "Thank you", "Please"], a: 0, exp: "'Ø³Ù„Ø§Ù…' Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Hello Ø§Ø³Øª." }
          // ... 95 Ø³ÙˆØ§Ù„ Ø¯ÛŒÚ¯Ø±
        ]
      };

      // ========== ØªÙˆØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ ==========
      function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        if (id === 'dashboard') {
          updateHeader();
          startPlayTime();
        }
        if (id === 'fullProfile') updateFullProfile();
        if (id === 'shop') document.getElementById('shopCoins').innerText = gameState.user.coins;
        if (id === 'settings') updateSettings();
        if (id === 'ticTacToe') resetTicTacToe();
      }

      function registerUser() {
        const firstName = document.getElementById('firstName').value.trim();
        const lastName = document.getElementById('lastName').value.trim();
        if (!firstName || !lastName) {
          alert('Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯!');
          return;
        }
        gameState.user.name = firstName;
        gameState.user.family = lastName;
        gameState.user.coins = 0;
        gameState.user.level = 1;
        saveGameState();
        showScreen('dashboard');
      }

      function updateHeader() {
        const firstLetter = gameState.user.name.charAt(0).toUpperCase();
        document.getElementById('headerAvatar').innerText = firstLetter;
        document.getElementById('headerName').innerText = `${gameState.user.name} ${gameState.user.family}`;
        document.getElementById('headerCoins').innerText = gameState.user.coins;
        
        document.getElementById('quizAvatar').innerText = firstLetter;
        document.getElementById('quizName').innerText = `${gameState.user.name} ${gameState.user.family}`;
        document.getElementById('quizCoins').innerText = gameState.user.coins;
      }

      function updateFullProfile() {
        document.getElementById('fullAvatar').innerText = gameState.user.name.charAt(0).toUpperCase();
        document.getElementById('fullName').innerText = `${gameState.user.name} ${gameState.user.family}`;
        document.getElementById('totalCoins').innerText = gameState.user.coins;
        document.getElementById('playTime').innerText = gameState.user.playTime;
        document.getElementById('level').innerText = gameState.user.level;
        document.getElementById('totalQuestions').innerText = gameState.user.totalQuestions;
        document.getElementById('currentAvatar').innerText = gameState.user.avatar;
        document.getElementById('currentTheme').innerText = gameState.user.theme;
      }

      function updateSettings() {
        document.getElementById('settingsPlayTime').innerText = gameState.user.playTime;
        document.getElementById('gameLink').innerText = window.location.href;
        
        // ÙˆØ¶Ø¹ÛŒØª Ù…ÙˆØ³ÛŒÙ‚ÛŒ
        const musicBtn = document.getElementById('musicToggle');
        musicBtn.innerText = gameState.musicEnabled ? 'Ø±ÙˆØ´Ù†' : 'Ø®Ø§Ù…ÙˆØ´';
        musicBtn.className = 'toggle-btn ' + (gameState.musicEnabled ? 'active' : '');
        
        // ÙˆØ¶Ø¹ÛŒØª ØµØ¯Ø§
        const soundBtn = document.getElementById('soundToggle');
        soundBtn.innerText = gameState.soundEnabled ? 'Ø±ÙˆØ´Ù†' : 'Ø®Ø§Ù…ÙˆØ´';
        soundBtn.className = 'toggle-btn ' + (gameState.soundEnabled ? 'active' : '');
        
        // ÙˆØ¶Ø¹ÛŒØª Ø§Ù†ÛŒÙ…ÛŒØ´Ù†
        const animBtn = document.getElementById('animationToggle');
        animBtn.innerText = gameState.animationEnabled ? 'Ø±ÙˆØ´Ù†' : 'Ø®Ø§Ù…ÙˆØ´';
        animBtn.className = 'toggle-btn ' + (gameState.animationEnabled ? 'active' : '');
        
        // ÙˆØ¶Ø¹ÛŒØª ØªÙ…â€ŒÙ‡Ø§
        const blueBtn = document.getElementById('themeBlueToggle');
        const isBlueActive = gameState.user.purchasedItems.includes('theme_blue') && gameState.user.theme === 'Ø¢Ø¨ÛŒ-Ø¨Ù†ÙØ´';
        blueBtn.innerText = isBlueActive ? 'Ø±ÙˆØ´Ù†' : 'Ø®Ø§Ù…ÙˆØ´';
        blueBtn.className = 'toggle-btn ' + (isBlueActive ? 'active' : '');
        
        const greenBtn = document.getElementById('themeGreenToggle');
        const isGreenActive = gameState.user.purchasedItems.includes('theme_green') && gameState.user.theme === 'Ø³Ø¨Ø² Ø·Ø¨ÛŒØ¹Øª';
        greenBtn.innerText = isGreenActive ? 'Ø±ÙˆØ´Ù†' : 'Ø®Ø§Ù…ÙˆØ´';
        greenBtn.className = 'toggle-btn ' + (isGreenActive ? 'active' : '');
      }

      function startBattle(subject) {
        gameState.currentSubject = subject;
        gameState.currentQuestionIndex = 0;
        gameState.score = 0;
        // Ø±ÛŒØ³Øª Ú©Ø±Ø¯Ù† Ø³ÙˆØ§Ù„Ø§Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¯Ø±Ø³
        gameState.usedQuestions[subject] = [];
        showScreen('quiz');
        loadQuestion();
      }

      function loadQuestion() {
        const qList = questions[gameState.currentSubject];
        if (!qList || qList.length === 0) {
          alert('Ø³ÙˆØ§Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¯Ø±Ø³ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª!');
          showScreen('battleSelect');
          return;
        }
        
        // Ø§Ù†ØªØ®Ø§Ø¨ Ø³ÙˆØ§Ù„ ØªØµØ§Ø¯ÙÛŒ ØºÛŒØ±ØªÚ©Ø±Ø§Ø±ÛŒ
        let availableQuestions = [];
        for (let i = 0; i < qList.length; i++) {
          if (!gameState.usedQuestions[gameState.currentSubject].includes(i)) {
            availableQuestions.push(i);
          }
        }
        
        if (availableQuestions.length === 0) {
          // Ø§Ú¯Ø± Ù‡Ù…Ù‡ Ø³ÙˆØ§Ù„Ø§Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ØŒ Ø±ÛŒØ³Øª Ú©Ù†
          gameState.usedQuestions[gameState.currentSubject] = [];
          availableQuestions = Array.from({length: qList.length}, (_, i) => i);
        }
        
        const randomIndex = availableQuestions[Math.floor(Math.random() * availableQuestions.length)];
        gameState.usedQuestions[gameState.currentSubject].push(randomIndex);
        const q = qList[randomIndex];
        
        document.getElementById('question').innerText = `${gameState.currentQuestionIndex + 1}. ${q.q}`;
        const optionsDiv = document.getElementById('options');
        optionsDiv.innerHTML = '';
        q.o.forEach((opt, i) => {
          const btn = document.createElement('div');
          btn.className = 'option-card';
          btn.innerText = opt;
          btn.onclick = () => selectOption(i, q);
          optionsDiv.appendChild(btn);
        });
      }

      function selectOption(selectedIndex, q) {
        const options = document.querySelectorAll('#options .option-card');
        
        // Ø±Ù†Ú¯â€ŒØ¢Ù…ÛŒØ²ÛŒ
        options.forEach((opt, i) => {
          if (i === q.a) opt.classList.add('correct');
          else if (i === selectedIndex) opt.classList.add('wrong');
        });

        const isCorrect = selectedIndex === q.a;
        if (isCorrect) {
          gameState.score += 10;
          playSound('correct');
        } else {
          playSound('wrong');
        }

        // Ù†Ù…Ø§ÛŒØ´ ØªÙˆØ¶ÛŒØ­ Ø¯Ø§Ø®Ù„ Ø¨Ø§Ø²ÛŒ
        setTimeout(() => {
          document.getElementById('explanationText').innerText = q.exp;
          document.getElementById('explanationModal').style.display = 'flex';
        }, 1500);
      }

      function closeModal() {
        document.getElementById('explanationModal').style.display = 'none';
        gameState.currentQuestionIndex++;
        // Ø¨Ø¹Ø¯ Ø§Ø² 10 Ø³ÙˆØ§Ù„ØŒ Ù¾Ø§ÛŒØ§Ù† Ø¢Ø²Ù…ÙˆÙ†
        if (gameState.currentQuestionIndex >= 10) {
          alert(`Ø¢Ø²Ù…ÙˆÙ† ØªÙ…Ø§Ù… Ø´Ø¯!\nØ§Ù…ØªÛŒØ§Ø² Ø´Ù…Ø§: ${gameState.score}\nØ³Ú©Ù‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØªÛŒ: ${gameState.score * 5}`);
          gameState.user.coins += gameState.score * 5;
          gameState.user.totalQuestions += gameState.currentQuestionIndex;
          saveGameState();
          showScreen('dashboard');
        } else {
          loadQuestion();
        }
      }

      function endBattle() {
        document.getElementById('endScore').innerText = gameState.score;
        document.getElementById('endCoins').innerText = gameState.score * 5;
        document.getElementById('endBattleModal').style.display = 'flex';
      }

      function confirmEndBattle() {
        document.getElementById('endBattleModal').style.display = 'none';
        gameState.user.coins += gameState.score * 5;
        gameState.user.totalQuestions += gameState.currentQuestionIndex;
        saveGameState();
        showScreen('dashboard');
      }

      function buyAI(type) {
        if (type === 'Ø§Ø³ØªÙØ§Ø¯Ù‡' && gameState.user.unlockedAI.includes('Ø§Ø³ØªÙØ§Ø¯Ù‡')) {
          alert('Ø§ÛŒÙ† Ø¢Ù…ÙˆØ²Ø´ Ù‚Ø¨Ù„Ø§Ù‹ Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª!');
          return;
        }
        let price = 300;
        if (type === 'Ø§Ø³ØªÙØ§Ø¯Ù‡') {
          price = 300;
        }
        if (gameState.user.coins >= price) {
          gameState.user.coins -= price;
          if (type === 'Ø§Ø³ØªÙØ§Ø¯Ù‡') {
            gameState.user.unlockedAI.push('Ø§Ø³ØªÙØ§Ø¯Ù‡');
          }
          saveGameState();
          alert(`Ø¢Ù…ÙˆØ²Ø´ "${type}" Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ø´Ø¯!`);
        } else {
          alert(`Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯! (Ù†ÛŒØ§Ø² Ø¨Ù‡ ${price} Ø³Ú©Ù‡)`);
        }
      }

      function buyCivilizations() {
        if (gameState.user.unlockedCivilizations) {
          alert('Ø¢Ù…ÙˆØ²Ø´ ØªÙ…Ø¯Ù†â€ŒÙ‡Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª!');
          return;
        }
        if (gameState.user.coins >= 250) {
          gameState.user.coins -= 250;
          gameState.user.unlockedCivilizations = true;
          saveGameState();
          alert('Ø¢Ù…ÙˆØ²Ø´ ØªÙ…Ø¯Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø³ØªØ§Ù†ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ø´Ø¯!');
        } else {
          alert('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯! (Ù†ÛŒØ§Ø² Ø¨Ù‡ 250 Ø³Ú©Ù‡)');
        }
      }

      function buyFields() {
        if (gameState.user.unlockedFields) {
          alert('Ø¢Ù…ÙˆØ²Ø´ Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø¨ÛŒØ±Ø³ØªØ§Ù† Ù‚Ø¨Ù„Ø§Ù‹ Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª!');
          return;
        }
        if (gameState.user.coins >= 200) {
          gameState.user.coins -= 200;
          gameState.user.unlockedFields = true;
          saveGameState();
          alert('Ø¢Ù…ÙˆØ²Ø´ Ø±Ø´ØªÙ‡â€ŒÙ‡Ø§ÛŒ Ø¯Ø¨ÛŒØ±Ø³ØªØ§Ù† Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ø´Ø¯!');
        } else {
          alert('Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯! (Ù†ÛŒØ§Ø² Ø¨Ù‡ 200 Ø³Ú©Ù‡)');
        }
      }

      function buyItem(item) {
        const prices = { 
          music1: 150, 
          music2: 180, 
          avatar_gold: 300, 
          avatar_diamond: 500, 
          theme_blue: 100, 
          theme_green: 120 
        };
        const price = prices[item];
        if (gameState.user.coins >= price) {
          gameState.user.coins -= price;
          gameState.user.purchasedItems.push(item);
          if (item === 'avatar_gold') gameState.user.avatar = 'Ø·Ù„Ø§ÛŒÛŒ';
          if (item === 'avatar_diamond') gameState.user.avatar = 'Ø§Ù„Ù…Ø§Ø³ÛŒ';
          if (item === 'theme_blue') gameState.user.theme = 'Ø¢Ø¨ÛŒ-Ø¨Ù†ÙØ´';
          if (item === 'theme_green') gameState.user.theme = 'Ø³Ø¨Ø² Ø·Ø¨ÛŒØ¹Øª';
          if (item.startsWith('music')) {
            const music = document.getElementById(item);
            music.currentTime = 0;
            music.play().catch(e => console.log("Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ù¾Ø®Ø´ Ù†Ø´Ø¯:", e));
          }
          saveGameState();
          alert('Ø®Ø±ÛŒØ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!');
        } else {
          alert(`Ø³Ú©Ù‡ Ú©Ø§ÙÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯! (Ù†ÛŒØ§Ø² Ø¨Ù‡ ${price} Ø³Ú©Ù‡)`);
        }
      }

      function saveNote() {
        const note = document.getElementById('newNote').value.trim();
        if (note) {
          gameState.user.notes.push(note);
          document.getElementById('newNote').value = '';
          saveGameState();
          loadNotes();
          alert('ÛŒØ§Ø¯Ø¯Ø§Ø´Øª Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯!');
        }
      }

      function loadNotes() {
        const notesList = document.getElementById('notesList');
        notesList.innerHTML = '';
        gameState.user.notes.forEach((note, i) => {
          const div = document.createElement('div');
          div.className = 'note-item';
          div.innerText = note;
          notesList.appendChild(div);
        });
      }

      function saveIdea(topic) {
        const inputId = topic === 'Ù¾Ø§Ø±Ú©' ? 'ideaInput1' : topic === 'Ø®Ø§Ù†Ù‡' ? 'ideaInput2' : 'ideaInput3';
        const idea = document.getElementById(inputId).value.trim();
        if (idea) {
          gameState.user.notes.push(`Ø§ÛŒØ¯Ù‡ ${topic}: ${idea}`);
          document.getElementById(inputId).value = '';
          saveGameState();
          alert(`Ø§ÛŒØ¯Ù‡ Ø´Ù…Ø§ Ø¨Ø±Ø§ÛŒ "${topic}" Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯!`);
        }
      }

      function addEmoji(emoji) {
        const display = document.getElementById('emojiDisplay');
        display.innerText += emoji;
      }

      function copyGameLink() {
        const link = document.getElementById('gameLink').innerText;
        if (navigator.clipboard) {
          navigator.clipboard.writeText(link).then(() => {
            alert('Ù„ÛŒÙ†Ú© Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ú©Ù¾ÛŒ Ø´Ø¯!\nØ¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø¯ÙˆØ³ØªØ§Ù† Ø®ÙˆØ¯ØŒ Ø¯Ø± Ù¾ÛŒØ§Ù…â€ŒØ±Ø³Ø§Ù† Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø¨ÙØ±Ø³ØªÛŒØ¯.');
          }).catch(err => {
            alert('Ø®Ø·Ø§ Ø¯Ø± Ú©Ù¾ÛŒ Ù„ÛŒÙ†Ú©: ' + err);
          });
        } else {
          // Ø±ÙˆØ´ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø¨Ø±Ø§ÛŒ Ù…Ø±ÙˆØ±Ú¯Ø±Ù‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ
          const textArea = document.createElement("textarea");
          textArea.value = link;
          document.body.appendChild(textArea);
          textArea.select();
          try {
            document.execCommand('copy');
            alert('Ù„ÛŒÙ†Ú© Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ú©Ù¾ÛŒ Ø´Ø¯!');
          } catch (err) {
            alert('Ø®Ø·Ø§ Ø¯Ø± Ú©Ù¾ÛŒ Ù„ÛŒÙ†Ú©');
          }
          document.body.removeChild(textArea);
        }
      }

      function toggleMusic() {
        gameState.musicEnabled = !gameState.musicEnabled;
        if (gameState.musicEnabled) {
          // Ù¾Ø®Ø´ Ù…ÙˆØ³ÛŒÙ‚ÛŒ 1 Ø¨Ù‡ ØµÙˆØ±Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶
          const music = document.getElementById('music1');
          music.loop = true;
          music.play().catch(e => console.log("Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ù¾Ø®Ø´ Ù†Ø´Ø¯:", e));
        } else {
          document.getElementById('music1').pause();
          document.getElementById('music2').pause();
        }
        saveGameState();
        updateSettings();
      }

      function toggleSound() {
        gameState.soundEnabled = !gameState.soundEnabled;
        saveGameState();
        updateSettings();
      }

      function toggleAnimation() {
        gameState.animationEnabled = !gameState.animationEnabled;
        saveGameState();
        updateSettings();
      }

      function toggleTheme(theme) {
        if (theme === 'blue') {
          if (gameState.user.purchasedItems.includes('theme_blue')) {
            if (gameState.user.theme === 'Ø¢Ø¨ÛŒ-Ø¨Ù†ÙØ´') {
              gameState.user.theme = 'Ù¾ÛŒØ´â€ŒÙØ±Ø¶';
            } else {
              gameState.user.theme = 'Ø¢Ø¨ÛŒ-Ø¨Ù†ÙØ´';
            }
          } else {
            alert('Ø§ÛŒÙ† ØªÙ… Ø±Ø§ Ø¨Ø§ÛŒØ¯ Ø§Ø² ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ú©Ù†ÛŒØ¯!');
            return;
          }
        } else if (theme === 'green') {
          if (gameState.user.purchasedItems.includes('theme_green')) {
            if (gameState.user.theme === 'Ø³Ø¨Ø² Ø·Ø¨ÛŒØ¹Øª') {
              gameState.user.theme = 'Ù¾ÛŒØ´â€ŒÙØ±Ø¶';
            } else {
              gameState.user.theme = 'Ø³Ø¨Ø² Ø·Ø¨ÛŒØ¹Øª';
            }
          } else {
            alert('Ø§ÛŒÙ† ØªÙ… Ø±Ø§ Ø¨Ø§ÛŒØ¯ Ø§Ø² ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø®Ø±ÛŒØ¯Ø§Ø±ÛŒ Ú©Ù†ÛŒØ¯!');
            return;
          }
        }
        saveGameState();
        updateSettings();
      }

      function changeFont(fontName) {
        document.body.style.fontFamily = `'${fontName}', system-ui, sans-serif`;
        gameState.currentFont = fontName;
        saveGameState();
      }

      function changeName() {
        const newFirstName = document.getElementById('newFirstName').value.trim();
        const newLastName = document.getElementById('newLastName').value.trim();
        if (!newFirstName || !newLastName) {
          alert('Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø¬Ø¯ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯!');
          return;
        }
        gameState.user.name = newFirstName;
        gameState.user.family = newLastName;
        saveGameState();
        updateHeader();
        updateFullProfile();
        alert('Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ØªØºÛŒÛŒØ± Ú©Ø±Ø¯!');
      }

      function playSound(type) {
        if (!gameState.soundEnabled) return;
        const sound = document.getElementById(type + 'Sound');
        if (sound) {
          sound.currentTime = 0;
          sound.play().catch(e => console.log("ØµØ¯Ø§ Ù¾Ø®Ø´ Ù†Ø´Ø¯:", e));
        }
      }

      function saveGameState() {
        localStorage.setItem('aradQuizStateUltra3', JSON.stringify(gameState));
      }

      function loadGameState() {
        const saved = localStorage.getItem('aradQuizStateUltra3');
        if (saved) {
          try {
            const parsed = JSON.parse(saved);
            gameState = { ...gameState, ...parsed };
            if (gameState.user.name) {
              showScreen('dashboard');
              updateHeader();
              startPlayTime();
              // Ø§Ø¹Ù…Ø§Ù„ ÙÙˆÙ†Øª Ø°Ø®ÛŒØ±Ù‡â€ŒØ´Ø¯Ù‡
              if (gameState.currentFont) {
                document.body.style.fontFamily = `'${gameState.currentFont}', system-ui, sans-serif`;
              }
            }
          } catch (e) {
            console.log("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ state:", e);
          }
        }
      }

      function startPlayTime() {
        if (gameState.playTimeInterval) return;
        gameState.startTime = Date.now();
        gameState.playTimeInterval = setInterval(() => {
          const elapsed = Math.floor((Date.now() - gameState.startTime) / 60000);
          gameState.user.playTime = elapsed;
          // Ø³ÛŒØ³ØªÙ… Ø³Ø·Ø­â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø²Ù…Ø§Ù†
          const newLevel = Math.min(10, Math.floor(elapsed / 30) + 1);
          if (newLevel > gameState.user.level) {
            gameState.user.level = newLevel;
            if (newLevel === 2) gameState.user.avatar = 'Ø·Ù„Ø§ÛŒÛŒ';
            if (newLevel === 5) gameState.user.avatar = 'Ø§Ù„Ù…Ø§Ø³ÛŒ';
            if (newLevel === 10) gameState.user.avatar = 'Ø§Ø³Ø·ÙˆØ±Ù‡â€ŒØ§ÛŒ';
            playSound('levelUp');
            alert(`ØªØ¨Ø±ÛŒÚ©! Ø¨Ù‡ Ø³Ø·Ø­ ${newLevel} Ø±Ø³ÛŒØ¯ÛŒØ¯ Ùˆ Ø¢ÙˆØ§ØªØ§Ø± Ø¬Ø¯ÛŒØ¯ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯ÛŒØ¯!`);
          }
          saveGameState();
        }, 60000);
      }

      // ========== ØªÙˆØ§Ø¨Ø¹ Ø¯ÙˆØ² ==========
      function resetTicTacToe() {
        gameState.ticTacToeBoard = ['', '', '', '', '', '', '', '', ''];
        gameState.currentPlayer = 'X';
        gameState.gameActive = true;
        updateTicTacToeBoard();
      }

      function makeMove(index) {
        if (!gameState.gameActive || gameState.ticTacToeBoard[index] !== '') return;
        
        gameState.ticTacToeBoard[index] = gameState.currentPlayer;
        updateTicTacToeBoard();
        
        if (checkWinner()) {
          alert(`Ø¨Ø§Ø²ÛŒ ØªÙ…Ø§Ù… Ø´Ø¯! ${gameState.currentPlayer === 'X' ? 'Ø´Ù…Ø§' : 'Ø±Ø¨Ø§Øª'} Ø¨Ø±Ø¯!`);
          gameState.gameActive = false;
          return;
        }
        
        if (gameState.ticTacToeBoard.every(cell => cell !== '')) {
          alert('Ù…Ø³Ø§ÙˆÛŒ!');
          gameState.gameActive = false;
          return;
        }
        
        // Ø­Ø±Ú©Øª Ø±Ø¨Ø§Øª
        setTimeout(() => {
          makeBotMove();
        }, 500);
      }

      function makeBotMove() {
        if (!gameState.gameActive) return;
        
        // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ù„ÛŒ
        const emptyCells = gameState.ticTacToeBoard
          .map((cell, index) => cell === '' ? index : null)
          .filter(index => index !== null);
        
        if (emptyCells.length === 0) return;
        
        // Ø§Ù†ØªØ®Ø§Ø¨ ØªØµØ§Ø¯ÙÛŒ
        const randomIndex = emptyCells[Math.floor(Math.random() * emptyCells.length)];
        gameState.ticTacToeBoard[randomIndex] = 'O';
        gameState.currentPlayer = 'X';
        updateTicTacToeBoard();
        
        if (checkWinner()) {
          alert('Ø±Ø¨Ø§Øª Ø¨Ø±Ø¯!');
          gameState.gameActive = false;
          return;
        }
        
        if (gameState.ticTacToeBoard.every(cell => cell !== '')) {
          alert('Ù…Ø³Ø§ÙˆÛŒ!');
          gameState.gameActive = false;
        }
      }

      function updateTicTacToeBoard() {
        const cells = document.querySelectorAll('#ticTacToeBoard .game-cell');
        cells.forEach((cell, index) => {
          cell.innerText = gameState.ticTacToeBoard[index];
          if (gameState.ticTacToeBoard[index] === 'X') {
            cell.style.color = '#FF416C';
          } else if (gameState.ticTacToeBoard[index] === 'O') {
            cell.style.color = '#2575FC';
          }
        });
      }

      function checkWinner() {
        const winPatterns = [
          [0, 1, 2], [3, 4, 5], [6, 7, 8], // Ø³Ø·Ø±Ù‡Ø§
          [0, 3, 6], [1, 4, 7], [2, 5, 8], // Ø³ØªÙˆÙ†â€ŒÙ‡Ø§
          [0, 4, 8], [2, 4, 6] // Ù‚Ø·Ø±Ù‡Ø§
        ];
        
        return winPatterns.some(pattern => {
          const [a, b, c] = pattern;
          return (
            gameState.ticTacToeBoard[a] !== '' &&
            gameState.ticTacToeBoard[a] === gameState.ticTacToeBoard[b] &&
            gameState.ticTacToeBoard[a] === gameState.ticTacToeBoard[c]
          );
        });
      }

      // ========== Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ==========
      window.onload = function() {
        loadGameState();
        // ØªÙ†Ø¸ÛŒÙ… Ù„ÛŒÙ†Ú© Ø¨Ø§Ø²ÛŒ Ø¯Ø± ØªÙ†Ø¸ÛŒÙ…Ø§Øª
        if (document.getElementById('gameLink')) {
          document.getElementById('gameLink').innerText = window.location.href;
        }
      };
    </script>
  </div>
</body>
  </html>
